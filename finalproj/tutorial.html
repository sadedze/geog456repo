<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Senam Adedze">
<meta name="dcterms.date" content="2024-05-03">

<title>NC Road Closures Map Tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="tutorial_files/libs/clipboard/clipboard.min.js"></script>
<script src="tutorial_files/libs/quarto-html/quarto.js"></script>
<script src="tutorial_files/libs/quarto-html/popper.min.js"></script>
<script src="tutorial_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="tutorial_files/libs/quarto-html/anchor.min.js"></script>
<link href="tutorial_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="tutorial_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="tutorial_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="tutorial_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="tutorial_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-retrieval-and-prep" id="toc-data-retrieval-and-prep" class="nav-link active" data-scroll-target="#data-retrieval-and-prep">Data Retrieval and Prep</a></li>
  <li><a href="#create-a-leaflet-map" id="toc-create-a-leaflet-map" class="nav-link" data-scroll-target="#create-a-leaflet-map">Create a Leaflet Map</a>
  <ul class="collapse">
  <li><a href="#first-iteration" id="toc-first-iteration" class="nav-link" data-scroll-target="#first-iteration">First Iteration</a></li>
  </ul></li>
  <li><a href="#create-slider" id="toc-create-slider" class="nav-link" data-scroll-target="#create-slider">Create Slider</a>
  <ul class="collapse">
  <li><a href="#second-iteration" id="toc-second-iteration" class="nav-link" data-scroll-target="#second-iteration">Second Iteration</a></li>
  </ul></li>
  <li><a href="#create-heat-map" id="toc-create-heat-map" class="nav-link" data-scroll-target="#create-heat-map">Create Heat Map</a></li>
  <li><a href="#customization-and-aesthetics" id="toc-customization-and-aesthetics" class="nav-link" data-scroll-target="#customization-and-aesthetics">Customization and Aesthetics</a>
  <ul class="collapse">
  <li><a href="#final-iteration" id="toc-final-iteration" class="nav-link" data-scroll-target="#final-iteration">Final Iteration</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">NC Road Closures Map Tutorial</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i></button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Senam Adedze </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 3, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="data-retrieval-and-prep" class="level2">
<h2 class="anchored" data-anchor-id="data-retrieval-and-prep">Data Retrieval and Prep</h2>
<p>The road closure data was retrieved from the North Carolina Department of Transportation Traveler Information System (TIMS). The dataset was filtered to include only road closure points that were recorded during the incident period of Hurricane Florence (September 12th - September 29th, 2018).</p>
<p>The dataset provided information on how long the road closure lasted. I formatted the start and end date for each road closure into an asPOSIXCT format that both R and Javascript could read and calculate as values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## format start and end into time</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>st <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(df<span class="sc">$</span>start, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>fn <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(df<span class="sc">$</span>end, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I then saved this new dataset as a JSON.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert data to JSON</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>json_data <span class="ot">&lt;-</span> <span class="fu">toJSON</span>(df2)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Write JSON to file with .json extension</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write</span>(json_data, <span class="st">"finalproj/data.json"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-a-leaflet-map" class="level2">
<h2 class="anchored" data-anchor-id="create-a-leaflet-map">Create a Leaflet Map</h2>
<p>Next, in visual studio code, I created an html document and made a simple leaflet map centered on North Carolina. I first copied the CSS stylesheet and the source script, which allows you to use commands and styles specific to leaflet.</p>
<p>CSS Style Sheet</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">"stylesheet"</span> <span class="er">href</span><span class="ot">=</span><span class="st">"https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ot">integrity=</span><span class="st">"sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="ot">crossorigin=</span><span class="st">""</span><span class="kw">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Source Script</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ot">    integrity=</span><span class="st">"sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ot">    crossorigin=</span><span class="st">""</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"closures.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then I created a <code>div</code> (a container) for the map and gave it an <code>id</code>. The <code>id</code> allows me to then give the map dimensions in the CSS code using <code>#map</code>. To reference an object <code>id</code> in CSS, use a #.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Create Map Div and id  --&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">"map"</span><span class="kw">&gt;&lt;/div&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode code css code-with-copy"><code class="sourceCode css"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* map size */</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#map</span> { <span class="kw">height</span>: <span class="dv">500</span><span class="dt">px</span><span class="op">;</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, I created a leaflet map centered on North Carolina and added an OSM tile layer to the map.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">//Create leaflet map centered on North Carolina</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(<span class="st">'map'</span>)<span class="op">.</span><span class="fu">setView</span>([<span class="dv">35</span><span class="op">,</span> <span class="op">-</span><span class="dv">80</span>]<span class="op">,</span> <span class="dv">7</span>)<span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">//Add OSM tile layer</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">'https://tile.openstreetmap.org/{z}/{x}/{y}.png'</span><span class="op">,</span> {</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>            <span class="dt">maxZoom</span><span class="op">:</span> <span class="dv">19</span><span class="op">,</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">attribution</span><span class="op">:</span> <span class="st">'© OpenStreetMap'</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, I imported the JSON of road closures and created a javascript file from the json, naming the file closures.</p>
<p>I then added a script src line of code to connect the html to the JS file with the data.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script src<span class="op">=</span><span class="st">"closures.js"</span><span class="op">&gt;&lt;/</span>script<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>My original dataset had longitude and latitude in two different columns, and they need to be in the same column as a vector to be read by javascript. The following lines of code create a new variable, <code>geojsonData</code>, which has all the data from my dataset, but one singular column for latitude and longitude as a vector.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a> <span class="co">//Create new geojson that turns lat and lon columns into a vector of geometry</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> geojsonData <span class="op">=</span> {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"type"</span><span class="op">:</span> <span class="st">"FeatureCollection"</span><span class="op">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"features"</span><span class="op">:</span> []</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">//loop iterating through the whole dataset for each data point</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        closures<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span> (dataPoint) {</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> feature <span class="op">=</span> {</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>                <span class="st">"type"</span><span class="op">:</span> <span class="st">"Feature"</span><span class="op">,</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">"properties"</span><span class="op">:</span> {</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"IncidentID"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">IncidentID</span><span class="op">,</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"start"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">start</span><span class="op">,</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"end"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">end</span><span class="op">,</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"RoadName"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">RoadName</span><span class="op">,</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"CommonName"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">CommonName</span><span class="op">,</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Direction"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">Direction</span><span class="op">,</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ConditionName"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">ConditionName</span><span class="op">,</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"IncidentType"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">IncidentType</span><span class="op">,</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Event"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">Event</span><span class="op">,</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"EventName"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">EventName</span><span class="op">,</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Reason"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">Reason</span><span class="op">,</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"DOTNotes"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">DOTNotes</span><span class="op">,</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"day"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">day</span><span class="op">,</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"flood"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">flood</span><span class="op">,</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"wind"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">wind</span><span class="op">,</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"winter"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">winter</span><span class="op">,</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"fog"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">fog</span><span class="op">,</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"rainevent"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">rainevent</span><span class="op">,</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"winterevent"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">winterevent</span><span class="op">,</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"cycloneevent"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">cycloneevent</span><span class="op">,</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"dur"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">dur</span><span class="op">,</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"noweather"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">noweather</span><span class="op">,</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"st"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">st</span><span class="op">,</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"fn"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">fn</span><span class="op">,</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"t"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">t</span><span class="op">,</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"te"</span><span class="op">:</span> dataPoint<span class="op">.</span><span class="at">te</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>                <span class="st">"geometry"</span><span class="op">:</span> { <span class="co">//here is where the new lat/lon vector is located</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"type"</span><span class="op">:</span> <span class="st">"Point"</span><span class="op">,</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"coordinates"</span><span class="op">:</span> [dataPoint<span class="op">.</span><span class="at">Longitude</span><span class="op">,</span> dataPoint<span class="op">.</span><span class="at">Latitude</span>]</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>            }<span class="op">;</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>            geojsonData<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">push</span>(feature)<span class="op">;</span> <span class="co">//adds entire feature to the geojsonData object</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I then created a custom icon for the road closures. To change the points to an “x” to symbolize a road closure, I made an “x” icon using unicode characters, a built-in library of common symbols. Each symbol has a code. (Note: Some unicode symbols only work with particular fonts, otherwise they will just show up as squares.) I use <code>L.divIcon</code> instead of the default <code>L.Icon</code> because a <code>div</code> icon makes a lightweight icon for markers that uses a simple <code>div</code> element instead of an image, which can take longer to load. I have a lot of points, so this method is better for me than a png.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">//Create unique icon (x for road closures)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> customIcon <span class="op">=</span> L<span class="op">.</span><span class="fu">divIcon</span>({</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>            <span class="dt">className</span><span class="op">:</span> <span class="st">'material-symbols-outlined'</span><span class="op">,</span> <span class="co">//give class for CSS purposes</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">iconAnchor</span><span class="op">:</span> [<span class="dv">5</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">,</span> <span class="co">//determines size of icon</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">html</span><span class="op">:</span> <span class="st">'&amp;#x2716;'</span> <span class="co">//code for "x" icon</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I added these CSS elements for the icon</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode code css code-with-copy"><code class="sourceCode css"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* icon styles */</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.material-symbols-outlined</span> {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>            <span class="kw">font-variation-settings</span>: <span class="st">'FILL'</span> <span class="dv">0</span><span class="op">,</span> <span class="st">'wght'</span> <span class="dv">400</span><span class="op">,</span> <span class="st">'GRAD'</span> <span class="dv">0</span><span class="op">,</span> <span class="st">'opsz'</span> <span class="dv">24</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">display</span>: <span class="dv">inline-block</span><span class="op">;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>            <span class="kw">color</span>: <span class="fu">rgb(</span><span class="dv">220</span><span class="op">,</span> <span class="dv">41</span><span class="op">,</span> <span class="dv">41</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>            <span class="kw">font-family</span>: <span class="st">'Material Icons'</span><span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>            <span class="kw">font-size</span>: <span class="dv">12</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then I created a geojson layer, using the point to layer leaflet plugin to place the points on the map. I also created a popup that provided content on each particular closure when the point was clicked.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create geojson layer from closure data</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> geojsonLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJson</span>(geojsonData<span class="op">,</span> {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointToLayer</span><span class="op">:</span> <span class="kw">function</span> (feature<span class="op">,</span> latlng) {</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Create marker with custom icon</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> marker <span class="op">=</span> L<span class="op">.</span><span class="fu">marker</span>(latlng<span class="op">,</span> { <span class="dt">icon</span><span class="op">:</span> customIcon })<span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Bind a popup to the marker</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">.</span><span class="fu">bindPopup</span>(<span class="st">"&lt;b&gt;Road Name:&lt;/b&gt; "</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">RoadName</span> <span class="op">+</span> <span class="st">"&lt;br&gt;"</span> <span class="op">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"&lt;b&gt;Direction:&lt;/b&gt; "</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Direction</span> <span class="op">+</span> <span class="st">"&lt;br&gt;"</span> <span class="op">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"&lt;b&gt;Start Time:&lt;/b&gt; "</span> <span class="op">+</span> <span class="kw">new</span> <span class="bu">Date</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">st</span>)<span class="op">.</span><span class="fu">toDateString</span>() <span class="op">+</span> <span class="st">"&lt;br&gt;"</span> <span class="op">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"&lt;b&gt;End Time:&lt;/b&gt; "</span> <span class="op">+</span> <span class="kw">new</span> <span class="bu">Date</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">fn</span>)<span class="op">.</span><span class="fu">toDateString</span>() <span class="op">+</span> <span class="st">"&lt;br&gt;"</span> <span class="op">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"&lt;b&gt;Reason:&lt;/b&gt; "</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">Reason</span>)<span class="op">;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> marker<span class="op">;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here is what the first iteration of my map looked like with each road closure point appearing as an “x” on the map. Zoom in and click to get information about a road closure!</p>
<section id="first-iteration" class="level3">
<h3 class="anchored" data-anchor-id="first-iteration">First Iteration</h3>



<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="">
<style>
/* map size */
#map { height: 500px; }
/* icon styles */
.material-symbols-outlined {
font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;display: inline-block;color: rgb(220, 41, 41);font-family: 'Material Icons';font-size: 12px;}
</style>


<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
<script src="closures.js"></script>
<!-- Create Map Div and id  -->
<div id="map"></div>
<script>
//Create leaflet map centered on North Carolina
var map = L.map('map').setView([35, -80], 7);
//Add OSM tile layer
L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19,attribution: '© OpenStreetMap'}).addTo(map);
//Create new geojson that turns lat and lon columns into a vector of geometry
var geojsonData = {
"type": "FeatureCollection",
"features": []};
//loop iterating through the whole dataset for each data point
closures.forEach(function (dataPoint) {
var feature = {"type": "Feature","properties": {"IncidentID": dataPoint.IncidentID,"start": dataPoint.start,"end": dataPoint.end,"RoadName": dataPoint.RoadName,"CommonName": dataPoint.CommonName,"Direction": dataPoint.Direction,"ConditionName": dataPoint.ConditionName,"IncidentType": dataPoint.IncidentType,
                    "Event": dataPoint.Event,
                    "EventName": dataPoint.EventName,
                    "Reason": dataPoint.Reason,
                    "DOTNotes": dataPoint.DOTNotes,
                    "day": dataPoint.day,
                    "flood": dataPoint.flood,
                    "wind": dataPoint.wind,
                    "winter": dataPoint.winter,
                    "fog": dataPoint.fog,
                    "rainevent": dataPoint.rainevent,
                    "winterevent": dataPoint.winterevent,
                    "cycloneevent": dataPoint.cycloneevent,
                    "dur": dataPoint.dur,
                    "noweather": dataPoint.noweather,
                    "st": dataPoint.st,
                    "fn": dataPoint.fn,
                    "t": dataPoint.t,
                    "te": dataPoint.te
                },
                "geometry": { //here is where the new lat/lon vector is located
                    "type": "Point",
                    "coordinates": [dataPoint.Longitude, dataPoint.Latitude]
                }
            };
            geojsonData.features.push(feature); //adds entire feature to the geojsonData object
        });

   // Create unique icon (x for road closures)
var customIcon = L.divIcon({
    className: 'material-symbols-outlined',
    iconAnchor: [5, 5],
    html: '&#x2716;'
});

// Create geojson layer from closure data
var geojsonLayer = L.geoJson(geojsonData, {
    pointToLayer: function (feature, latlng) {
        // Create marker with custom icon
        var marker = L.marker(latlng, { icon: customIcon });

        // Bind a popup to the marker
        marker.bindPopup("<b>Road Name:</b> " + feature.properties.RoadName + "<br>" +
                   "<b>Direction:</b> " + feature.properties.Direction + "<br>" +
                   "<b>Start Time:</b> " + new Date(feature.properties.st).toDateString() + "<br>" +
                   "<b>End Time:</b> " + new Date(feature.properties.fn).toDateString() + "<br>" +
                   "<b>Reason:</b> " + feature.properties.Reason);

        return marker;
    }
}).addTo(map);

    

</script>

    


</section>
</section>
<section id="create-slider" class="level2">
<h2 class="anchored" data-anchor-id="create-slider">Create Slider</h2>
<p>Next, I added the time component. I created a slider, gave it an id for CSS (style) purposes. The min and max reflected the range of days I wanted to capture (September 12th - September 29th, 2018, 17 days).</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;input</span> <span class="er">id</span><span class="ot">=</span><span class="st">"dateSlider"</span> <span class="er">type</span><span class="ot">=</span><span class="st">"range"</span> <span class="er">value</span><span class="ot">=</span><span class="st">"0"</span> <span class="er">name</span><span class="ot">=</span><span class="st">"Day"</span> <span class="er">min</span><span class="ot">=</span><span class="st">"0"</span> <span class="er">max</span><span class="ot">=</span><span class="st">"17"</span> <span class="er">oninput</span><span class="ot">=</span><span class="st">"moveSlider(this.value)"</span><span class="kw">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I then created the function, <code>moveSlider</code> to reflect the number of road closures over time. Each road closure point had a start time and end time. I designed the function so that the point appears on the day it starts and disappears on the day it ends.</p>
<p>First I make the dates compatible with the slider range (0 to 17). I define variables for the start and end date of my date range so I can manipulate them more easily. I need to make September 12th = 0 and September 29th = 17. <code>getTime()</code> is a JavaScript command that works with Date objects and returns the numeric value corresponding to the specified time. I calculate each date as a proportion of 17 in the variable <code>selectedTime</code> so it corresponds to the value of the slider.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create slider function</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">moveSlider</span>(value) {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Define start and end dates</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> startDate <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"2018-09-12T00:00:00Z"</span>)<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> endDate <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="st">"2018-09-29T23:59:59Z"</span>)<span class="op">;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Calculate total duration in milliseconds</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> totalDuration <span class="op">=</span> endDate<span class="op">.</span><span class="fu">getTime</span>() <span class="op">-</span> startDate<span class="op">.</span><span class="fu">getTime</span>()<span class="op">;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Calculate the selected time based on the slider value, make it a proportion of 17</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> selectedTime <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(startDate<span class="op">.</span><span class="fu">getTime</span>() <span class="op">+</span> (totalDuration <span class="op">*</span> value <span class="op">/</span> <span class="dv">17</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The function then filters geojsonData to find features that fall within the <code>selectedTime</code> range and adds markers for these features to the geojsonLayer. If the <code>selectedTime</code> is greater than the <code>startTime</code> and less than the <code>endTime</code>, the point appears. If it falls outside that range, the point does not appear.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Filter geojsonData based on selected time</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> filteredData <span class="op">=</span> geojsonData<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span> (feature) {</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> startTime <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">st</span>)<span class="op">.</span><span class="fu">getTime</span>()<span class="op">;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> endTime <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">fn</span>)<span class="op">.</span><span class="fu">getTime</span>()<span class="op">;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> selectedTime <span class="op">&gt;=</span> startTime <span class="op">&amp;&amp;</span> selectedTime <span class="op">&lt;=</span> endTime<span class="op">;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Once my points are coded to appear and disappear when I want them to, I add a line of code that clears the markers on the map each time the slider is moved, so the points don’t populate on top of each other.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a> <span class="co">// Clear existing markers from geojsonLayer</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    geojsonLayer<span class="op">.</span><span class="fu">clearLayers</span>()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After clearing the map, I add the markers to the map according the logic of <code>filterdData</code>. This is the end of my slider function, which iterates through the entire dataset.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Add markers for filtered data to geojsonLayer</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    filteredData<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span> (feature) {</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> marker <span class="op">=</span> L<span class="op">.</span><span class="fu">marker</span>([feature<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">coordinates</span>[<span class="dv">1</span>]<span class="op">,</span> feature<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">coordinates</span>[<span class="dv">0</span>]]<span class="op">,</span> { <span class="dt">icon</span><span class="op">:</span> customIcon })<span class="op">;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        geojsonLayer<span class="op">.</span><span class="fu">addLayer</span>(marker)<span class="op">;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I then write code to make sure my slider starts at zero each time the page is refreshed.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">//Start with empty map</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">moveSlider</span>(<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="second-iteration" class="level3">
<h3 class="anchored" data-anchor-id="second-iteration">Second Iteration</h3>



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="">
   <style>
    /* map size */
    #map2 { height: 500px; }

    /* icon styles */
    .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            display: inline-block;
            color: rgb(220, 41, 41);
            font-family: 'Material Icons';
            font-size: 12px;
    }

   </style>



    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
    <script src="closures.js"></script>
    <!-- Create slider -->
    <input id="dateSlider" type="range" value="0" name="Day" min="0" max="17" oninput="moveSlider(this.value)">

    <!-- Create Map Div and id  -->
    <div id="map2"></div>

<script>

    //Create leaflet map centered on North Carolina
    var map2 = L.map('map2').setView([35, -80], 7);

    //Add OSM tile layer
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap'
        }).addTo(map2);

    //Create new geojson that turns lat and lon columns into a vector of geometry
    var geojsonData = {
        "type": "FeatureCollection",
        "features": []
        };
        //loop iterating through the whole dataset for each data point
        closures.forEach(function (dataPoint) {
            var feature = {
                "type": "Feature",
                "properties": {
                    "IncidentID": dataPoint.IncidentID,
                    "start": dataPoint.start,
                    "end": dataPoint.end,
                    "RoadName": dataPoint.RoadName,
                    "CommonName": dataPoint.CommonName,
                    "Direction": dataPoint.Direction,
                    "ConditionName": dataPoint.ConditionName,
                    "IncidentType": dataPoint.IncidentType,
                    "Event": dataPoint.Event,
                    "EventName": dataPoint.EventName,
                    "Reason": dataPoint.Reason,
                    "DOTNotes": dataPoint.DOTNotes,
                    "day": dataPoint.day,
                    "flood": dataPoint.flood,
                    "wind": dataPoint.wind,
                    "winter": dataPoint.winter,
                    "fog": dataPoint.fog,
                    "rainevent": dataPoint.rainevent,
                    "winterevent": dataPoint.winterevent,
                    "cycloneevent": dataPoint.cycloneevent,
                    "dur": dataPoint.dur,
                    "noweather": dataPoint.noweather,
                    "st": dataPoint.st,
                    "fn": dataPoint.fn,
                    "t": dataPoint.t,
                    "te": dataPoint.te
                },
                "geometry": { //here is where the new lat/lon vector is located
                    "type": "Point",
                    "coordinates": [dataPoint.Longitude, dataPoint.Latitude]
                }
            };
            geojsonData.features.push(feature); //adds entire feature to the geojsonData object
        });

   // Create unique icon (x for road closures)
var customIcon = L.divIcon({
    className: 'material-symbols-outlined',
    iconAnchor: [5, 5],
    html: '&#x2716;'
});

// Create geojson layer from closure data
var geojsonLayer = L.geoJson(geojsonData, {
    pointToLayer: function (feature, latlng) {
        // Create marker with custom icon
        var marker = L.marker(latlng, { icon: customIcon });

        // Bind a popup to the marker
        marker.bindPopup("<b>Road Name:</b> " + feature.properties.RoadName + "<br>" +
                   "<b>Direction:</b> " + feature.properties.Direction + "<br>" +
                   "<b>Start Time:</b> " + new Date(feature.properties.st).toDateString() + "<br>" +
                   "<b>End Time:</b> " + new Date(feature.properties.fn).toDateString() + "<br>" +
                   "<b>Reason:</b> " + feature.properties.Reason);

        return marker;
    }
}).addTo(map2);

// Create slider function
function moveSlider(value) {
    // Define start and end dates
    var startDate = new Date("2018-09-12T00:00:00Z");
    var endDate = new Date("2018-09-29T23:59:59Z");
    
    // Calculate total duration in milliseconds
    var totalDuration = endDate.getTime() - startDate.getTime();
    
    // Calculate the selected time based on the slider value, make it a proportion of 17
    var selectedTime = new Date(startDate.getTime() + (totalDuration * value / 17));

    // Filter geojsonData based on selected time
    var filteredData = geojsonData.features.filter(function (feature) {
        var startTime = new Date(feature.properties.st).getTime();
        var endTime = new Date(feature.properties.fn).getTime();
        return selectedTime >= startTime && selectedTime <= endTime;
    });

    // Clear existing markers from geojsonLayer
    geojsonLayer.clearLayers();

    // Add markers for filtered data to geojsonLayer
    filteredData.forEach(function (feature) {
        var marker = L.marker([feature.geometry.coordinates[1], feature.geometry.coordinates[0]], { icon: customIcon });
        geojsonLayer.addLayer(marker);
    });
}


//Start with empty map
moveSlider(0)

</script>

    


</section>
</section>
<section id="create-heat-map" class="level2">
<h2 class="anchored" data-anchor-id="create-heat-map">Create Heat Map</h2>
<p>The point layer is nice, but very crowded. I want to find another way to convey the scale of road closures. I create another map layer that visualizes point density: a heatmap.</p>
<p>To create a heatmap, I used a leaflet heatmap plugin called Leaflet.heat. First, I add the style sheet and the source script to the html.</p>
<p>Style Sheet</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">"stylesheet"</span> <span class="er">href</span><span class="ot">=</span><span class="st">"https://unpkg.com/leaflet.heat/dist/leaflet.heat.css"</span> <span class="kw">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Source Script</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"https://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I created a second map layer for the heatmap. Because there are so many data points, this particular dataset makes the heatmap all one color. This can be adjusted by customizing the gradient, max and radius values. I edited the max and gradient values so that they reflected the full distribution of my data.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> heatLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">heatLayer</span>(geojsonData<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span> (feature) {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> [feature<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">coordinates</span>[<span class="dv">1</span>]<span class="op">,</span> feature<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">coordinates</span>[<span class="dv">0</span>]]<span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>        })<span class="op">,</span> {</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">radius</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">blur</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>            <span class="dt">maxZoom</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>            <span class="dt">max</span><span class="op">:</span> <span class="fl">1.8</span><span class="op">,</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">gradient</span><span class="op">:</span> {</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>                <span class="fl">0.1</span><span class="op">:</span> <span class="st">'blue'</span><span class="op">,</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>                <span class="fl">0.2</span><span class="op">:</span> <span class="st">'cyan'</span><span class="op">,</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>                <span class="fl">0.4</span><span class="op">:</span> <span class="st">'lime'</span><span class="op">,</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>                <span class="fl">0.6</span><span class="op">:</span> <span class="st">'yellow'</span><span class="op">,</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>                <span class="fl">0.9</span><span class="op">:</span> <span class="st">'orange'</span><span class="op">,</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>                <span class="fl">1.0</span><span class="op">:</span> <span class="st">'red'</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>        })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then, with the help of ChatGPT, I added these lines of code to the bottom of the moveSlider function to incorporate the heat map layer, so the heatmap layer would be synchronized with the point layer.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">//Create variable to store filtered data points for heatlayer</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> heatData <span class="op">=</span> filteredData<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span> (feature) {</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> [feature<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">coordinates</span>[<span class="dv">1</span>]<span class="op">,</span> feature<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">coordinates</span>[<span class="dv">0</span>]]<span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>            })<span class="op">;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>            <span class="co">//direct heatlayer command to pull from heatData</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>            heatLayer<span class="op">.</span><span class="fu">setLatLngs</span>(heatData)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here is a photo of what we’re working with.</p>
<p><img src="images/heat.pt.png" class="img-fluid"></p>
</section>
<section id="customization-and-aesthetics" class="level2">
<h2 class="anchored" data-anchor-id="customization-and-aesthetics">Customization and Aesthetics</h2>
<p>This is a functional map. But I want to add some customizable features for the user, and add some information to let the reader know what I’m visualizing. The heat layer and point layer on top of one another make the visualization muddled.</p>
<p>Next, I created added layer switching controls for both layers. I defined the two layers, added the baselayer control object to the map, and added both layers to the map. Now the user can decide to look at the point or heat layer.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">//Add layer control to toggle back and forth between layers</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> baseLayers <span class="op">=</span> {</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Heatmap"</span><span class="op">:</span> heatLayer<span class="op">,</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Points"</span><span class="op">:</span> geojsonLayer</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>        L<span class="op">.</span><span class="at">control</span><span class="op">.</span><span class="fu">layers</span>(<span class="kw">null</span><span class="op">,</span> baseLayers)<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">addLayer</span>(heatLayer)<span class="op">;</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">addLayer</span>(geojsonLayer)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For the search address feature, I used the geocoder plugin from leaflet called Leaflet Control Geocoder. You know the drill. Insert the plugin’s style sheet and source script.</p>
<p>Style Sheet</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">"stylesheet"</span> <span class="er">href</span><span class="ot">=</span><span class="st">"https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"</span><span class="kw">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Source Script</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I then customized the code to have a search icon and the words “Search Location” in the text box once the icon has been clicked.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">//create search location icon</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> geocoder <span class="op">=</span> L<span class="op">.</span><span class="at">Control</span><span class="op">.</span><span class="fu">geocoder</span>({</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>            <span class="dt">geocoder</span><span class="op">:</span> L<span class="op">.</span><span class="at">Control</span><span class="op">.</span><span class="at">Geocoder</span><span class="op">.</span><span class="fu">nominatim</span>()<span class="op">,</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">defaultMarkGeocode</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">placeholder</span><span class="op">:</span> <span class="st">"Search Location"</span><span class="op">,</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>            <span class="dt">collapsed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>            <span class="dt">query</span><span class="op">:</span> <span class="st">""</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>        })<span class="op">.</span><span class="fu">on</span>(<span class="st">'markgeocode'</span><span class="op">,</span> <span class="kw">function</span> (e) {</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> latlng <span class="op">=</span> e<span class="op">.</span><span class="at">geocode</span><span class="op">.</span><span class="at">center</span><span class="op">;</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>            map<span class="op">.</span><span class="fu">setView</span>(latlng<span class="op">,</span> map<span class="op">.</span><span class="fu">getZoom</span>())<span class="op">;</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>            map<span class="op">.</span><span class="fu">fitBounds</span>(e<span class="op">.</span><span class="at">geocode</span><span class="op">.</span><span class="at">bbox</span>)<span class="op">;</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>        })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Layer Control and Geocoder appear in the top right corner of the map.</p>
<p><img src="images/layer.geocoder.png" class="img-fluid"></p>
<p>I add a title and a date to the map. I use <code>&lt;span&gt;&lt;/span&gt;</code> for the date, because it will have dynamic content. I want to synchronize the date to the movement of the slider.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;h1&gt;</span>NC Road Closures During Hurricane Florence<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;h2&gt;</span>Date: <span class="kw">&lt;span</span> <span class="er">id</span><span class="ot">=</span><span class="st">"dateDisplay"</span><span class="kw">&gt;&lt;/span&gt;&lt;/h2&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, I create a function to update the date based on the slider value. I create a variable that connects the function to the h2 element above using the getElementById command. Then I change the date format so it returns to readable text.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">updateDateDisplay</span>(date) {</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>            <span class="co">//create var that updates date display element at top of page</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>            <span class="kw">var</span> dateDisplay <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'dateDisplay'</span>)<span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>            <span class="co">//Transform date into readable text</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>            dateDisplay<span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> date<span class="op">.</span><span class="fu">toDateString</span>()<span class="op">;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>        }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But how does the function know which date to choose? It relies on the slider value, which is also the earlier variable I created, selectedTime. <em>Within</em> the moveSlider function, I apply the updateDateDisplay function to the selectedTime. Now it will update each time the slider moves.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode code js code-with-copy"><code class="sourceCode javascript"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">updateDateDisplay</span>(selectedTime)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now I’ll add some more aesthetic features to the website itself. Using the w3school’s Round Slider CSS code, I customized my slider design.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode code css code-with-copy"><code class="sourceCode css"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#dateSlider</span> {</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>            <span class="kw">-webkit-appearance</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>            <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">height</span>: <span class="dv">15</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>            <span class="kw">border-radius</span>: <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>            <span class="kw">background</span>: <span class="cn">#d3d3d3</span><span class="op">;</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>            <span class="kw">outline</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>            <span class="kw">opacity</span>: <span class="dv">0.7</span><span class="op">;</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>            <span class="kw">-webkit-transition</span>: <span class="dv">.2</span><span class="dt">s</span><span class="op">;</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>            <span class="kw">transition</span>: opacity <span class="dv">.2</span><span class="dt">s</span><span class="op">;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>        <span class="pp">#dateSlider</span><span class="in">::-webkit-slider-thumb</span> {</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>            <span class="kw">-webkit-appearance</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>            <span class="kw">appearance</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">width</span>: <span class="dv">25</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>            <span class="kw">height</span>: <span class="dv">25</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>            <span class="kw">border-radius</span>: <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>            <span class="kw">background</span>: <span class="cn">#04AA6D</span><span class="op">;</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>            <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>        <span class="pp">#dateSlider</span><span class="in">::-moz-range-thumb</span> {</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>            <span class="kw">width</span>: <span class="dv">25</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>            <span class="kw">height</span>: <span class="dv">25</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>            <span class="kw">border-radius</span>: <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>            <span class="kw">background</span>: <span class="cn">#04AA6D</span><span class="op">;</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>            <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I want the map to take up most of the page, and I want the slider and text to move to the lefthand side of the page. I also want to leave room for some background text on Hurricane Florence. I do this by creating a div element called sidebar and placing my title, date, and slider with it.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span>NC Road Closures During Hurricane Florence<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h2&gt;</span>Date: <span class="kw">&lt;span</span> <span class="er">id</span><span class="ot">=</span><span class="st">"dateDisplay"</span><span class="kw">&gt;&lt;/span&gt;&lt;/h2&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- Create slider --&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;input</span> <span class="er">id</span><span class="ot">=</span><span class="st">"dateSlider"</span> <span class="er">type</span><span class="ot">=</span><span class="st">"range"</span> <span class="er">value</span><span class="ot">=</span><span class="st">"0"</span> <span class="er">name</span><span class="ot">=</span><span class="st">"Day"</span> <span class="er">min</span><span class="ot">=</span><span class="st">"0"</span> <span class="er">max</span><span class="ot">=</span><span class="st">"17"</span> <span class="er">oninput</span><span class="ot">=</span><span class="st">"moveSlider(this.value)"</span><span class="kw">&gt;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/div&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then I create another div that will encompass both the sidebar and the map called map container.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">"map-container"</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">"sidebar"</span><span class="kw">&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;h1&gt;</span>NC Road Closures During Hurricane Florence<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;h2&gt;</span>Date: <span class="kw">&lt;span</span> <span class="er">id</span><span class="ot">=</span><span class="st">"dateDisplay"</span><span class="kw">&gt;&lt;/span&gt;&lt;/h2&gt;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>            <span class="co">&lt;!-- Create slider --&gt;</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;input</span> <span class="er">id</span><span class="ot">=</span><span class="st">"dateSlider"</span> <span class="er">type</span><span class="ot">=</span><span class="st">"range"</span> <span class="er">value</span><span class="ot">=</span><span class="st">"0"</span> <span class="er">name</span><span class="ot">=</span><span class="st">"Day"</span> <span class="er">min</span><span class="ot">=</span><span class="st">"0"</span> <span class="er">max</span><span class="ot">=</span><span class="st">"17"</span> <span class="er">oninput</span><span class="ot">=</span><span class="st">"moveSlider(this.value)"</span><span class="kw">&gt;</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">&lt;!-- Create Map Div and id  --&gt;</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">"map"</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/div&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I add this css code. I set the sidebar and map to have positions relative to each other. Using 100vw and 100vh, I direct the map and sidebar to take up the entire screen (100% of viewport height and width). The display code places the sidebar on the left side of the screen. The CSS for the map div sets the maps width to take up the remaining space after the sidebar’s width is taken into account (flex: 1;), and sets its height to 100% of the map-container. Then I set the width and height of the sidebar, the background color, and margins. Notice how the id’s I assigned earlier are used for each object.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode code css code-with-copy"><code class="sourceCode css"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#map-container</span> {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">position</span>: <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">width</span>: <span class="dv">100</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">height</span>: <span class="dv">100</span><span class="dt">vh</span><span class="op">;</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">display</span>: <span class="dv">flex</span><span class="op">;</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">flex-direction</span>: row<span class="op">;</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#map</span> {</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">flex</span>: <span class="dv">1</span><span class="op">;</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">height</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#sidebar</span> {</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>            <span class="kw">width</span>: <span class="dv">350</span><span class="dt">px</span><span class="op">;</span> <span class="co">/* Set the width of the sidebar*/</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>            <span class="kw">height</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span> <span class="co">/* Set the height of the sidebar to 100% of its container's height */</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>            <span class="kw">background-color</span>: <span class="cn">#f9f9f9</span><span class="op">;</span> <span class="co">/* Set the background color of the sidebar to gray */</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">padding</span>: <span class="dv">20</span><span class="dt">px</span><span class="op">;</span> <span class="co">/* Add margins inside the sidebar */</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Lastly, I add an h3 element containing the background text about Hurricane Florence within the sidebar div. To hyperlink a word, I use <code>&lt;a href&gt;&lt;/&gt;</code>. <code>target=”blank”</code> opens the link in a new tab when it is clicked.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode code html code-with-copy"><code class="sourceCode html"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">"sidebar"</span><span class="kw">&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;h1&gt;</span>NC Road Closures During Hurricane Florence<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;h2&gt;</span>Date: <span class="kw">&lt;span</span> <span class="er">id</span><span class="ot">=</span><span class="st">"dateDisplay"</span><span class="kw">&gt;&lt;/span&gt;&lt;/h2&gt;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;input</span> <span class="er">id</span><span class="ot">=</span><span class="st">"dateSlider"</span> <span class="er">type</span><span class="ot">=</span><span class="st">"range"</span> <span class="er">value</span><span class="ot">=</span><span class="st">"0"</span> <span class="er">name</span><span class="ot">=</span><span class="st">"Day"</span> <span class="er">min</span><span class="ot">=</span><span class="st">"0"</span> <span class="er">max</span><span class="ot">=</span><span class="st">"17"</span> <span class="er">oninput</span><span class="ot">=</span><span class="st">"moveSlider(this.value)"</span><span class="kw">&gt;</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>            <span class="kw">&lt;h3&gt;</span>Hurricane Florence made landfall at Wrightsville Beach, North Carolina, on September 14, 2018. Florence was among the most expensive floods in US history, costing the state of North Carolina alone an estimated $22 billion. Over 140,000 North Carolinians registered for federal disaster assistance, and nearly 75,000 structures flooded. The record-breaking precipitation and inundation severely compromised roads. In the southeastern part of the state, nearly every major road and highway flooded, with many remaining impassable for several days after Florence had dissipated.<span class="kw">&lt;br&gt;&lt;/h3&gt;</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;a</span> <span class="er">href</span><span class="ot">=</span><span class="st">"https://www.nhc.noaa.gov/data/tcr/AL062018_Florence.pdf"</span> <span class="er">target</span><span class="ot">=</span><span class="st">"_blank"</span><span class="kw">&gt;</span>Source<span class="kw">&lt;/a&gt;</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;/div&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I add some CSS to increase font size, unbold it, and add space between the words and the slider.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode code css code-with-copy"><code class="sourceCode css"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#sidebar</span> h3 {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>            <span class="kw">font-size</span>: <span class="dv">18</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>            <span class="kw">font-weight</span>: <span class="dv">normal</span><span class="op">;</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>            <span class="kw">margin-top</span>: <span class="dv">30</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And that’s my map!</p>
<section id="final-iteration" class="level3">
<h3 class="anchored">Final Iteration</h3>



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="">
   <link rel="stylesheet" href="https://unpkg.com/leaflet.heat/dist/leaflet.heat.css">
   <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css">
   <style>
/* Set the body to use the full height of the page */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Set the map container to take up the remaining space */
#map-container3 {
    height: 600px; /* or any other desired height */
    width: 1000px; /* or any other desired width */
    display: flex;
}

/* Set the sidebar to have a fixed width and be scrollable */
#sidebar3 {
    width: 275px;
    overflow-y: auto;
    padding: 20px;
}

/* Set the map to take up the remaining space in the map container */
#map3 {
    flex: 1;
}

    /* icon styles */
    .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            display: inline-block;
            color: rgb(220, 41, 41);
            font-family: 'Material Icons';
            font-size: 12px;
    }
    #dateSlider3 {
            -webkit-appearance: none;
            width: 100%;
            height: 15px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            -webkit-transition: .2s;
            transition: opacity .2s;
            
        }
        #dateSlider3::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #04AA6D;
            cursor: pointer;
        }
        #dateSlider3::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #04AA6D;
            cursor: pointer;
        }
        #sidebar3 h1 {
            font-size: 24px;
        }
        #sidebar3 h2 {
            font-size: 24px;
            margin-top: 10px
        }
        #sidebar3 h3 {
            font-size: 18px;
            font-weight: normal;
            margin-top: 30px;
        }

   </style>



    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>
    <script src="https://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="closures.js"></script>
    <!-- create container for sidebar and map -->
    <div id="map-container3">
        <div id="sidebar3">
            <h1>NC Road Closures During Hurricane Florence</h1>
            <h2 class="anchored" data-anchor-id="final-iteration">Date: <span id="dateDisplay"></span></h2>
            <input id="dateSlider3" type="range" value="0" name="Day" min="0" max="17" oninput="moveSlider(this.value)">
            <h3 class="anchored">Hurricane Florence made landfall at Wrightsville Beach, North Carolina, on September 14, 2018. Florence was among the most expensive floods in US history, 
                costing the state of North Carolina alone an estimated $22 billion. Over 140,000 North Carolinians registered for federal disaster assistance, and nearly 
                75,000 structures flooded. The record-breaking precipitation and inundation severely compromised roads. In the southeastern part of the state, nearly every 
                major road and highway flooded, with many remaining impassable for several days after Florence had dissipated.<br></h3>
<a href="https://www.nhc.noaa.gov/data/tcr/AL062018_Florence.pdf" target="_blank">Source</a>
        </div>

        <!-- Create Map Div and id  -->
        <div id="map3"></div>
    </div>


<script>

    //Create leaflet map centered on North Carolina
    var map3 = L.map('map3').setView([35, -80], 7);

    //Add OSM tile layer
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap'
        }).addTo(map3);

    //Create new geojson that turns lat and lon columns into a vector of geometry
    var geojsonData = {
        "type": "FeatureCollection",
        "features": []
        };
        //loop iterating through the whole dataset for each data point
        closures.forEach(function (dataPoint) {
            var feature = {
                "type": "Feature",
                "properties": {
                    "IncidentID": dataPoint.IncidentID,
                    "start": dataPoint.start,
                    "end": dataPoint.end,
                    "RoadName": dataPoint.RoadName,
                    "CommonName": dataPoint.CommonName,
                    "Direction": dataPoint.Direction,
                    "ConditionName": dataPoint.ConditionName,
                    "IncidentType": dataPoint.IncidentType,
                    "Event": dataPoint.Event,
                    "EventName": dataPoint.EventName,
                    "Reason": dataPoint.Reason,
                    "DOTNotes": dataPoint.DOTNotes,
                    "day": dataPoint.day,
                    "flood": dataPoint.flood,
                    "wind": dataPoint.wind,
                    "winter": dataPoint.winter,
                    "fog": dataPoint.fog,
                    "rainevent": dataPoint.rainevent,
                    "winterevent": dataPoint.winterevent,
                    "cycloneevent": dataPoint.cycloneevent,
                    "dur": dataPoint.dur,
                    "noweather": dataPoint.noweather,
                    "st": dataPoint.st,
                    "fn": dataPoint.fn,
                    "t": dataPoint.t,
                    "te": dataPoint.te
                },
                "geometry": { //here is where the new lat/lon vector is located
                    "type": "Point",
                    "coordinates": [dataPoint.Longitude, dataPoint.Latitude]
                }
            };
            geojsonData.features.push(feature); //adds entire feature to the geojsonData object
        });

   // Create unique icon (x for road closures)
var customIcon = L.divIcon({
    className: 'material-symbols-outlined',
    iconAnchor: [5, 5],
    html: '&#x2716;'
});

// Create geojson layer from closure data
var geojsonLayer3 = L.geoJson(geojsonData, {
    pointToLayer: function (feature, latlng) {
        // Create marker with custom icon
        var marker = L.marker(latlng, { icon: customIcon });

        // Bind a popup to the marker
        marker.bindPopup("<b>Road Name:</b> " + feature.properties.RoadName + "<br>" +
                   "<b>Direction:</b> " + feature.properties.Direction + "<br>" +
                   "<b>Start Time:</b> " + new Date(feature.properties.st).toDateString() + "<br>" +
                   "<b>End Time:</b> " + new Date(feature.properties.fn).toDateString() + "<br>" +
                   "<b>Reason:</b> " + feature.properties.Reason);

        return marker;
    }
}).addTo(map3);

//Create heatmap layer
var heatLayer = L.heatLayer(geojsonData.features.map(function (feature) {
            return [feature.geometry.coordinates[1], feature.geometry.coordinates[0]];
        }), {
            radius: 25,
            blur: 15,
            maxZoom: 10,
            max: 1.8,
            gradient: {
                0.1: 'blue',
                0.2: 'cyan',
                0.4: 'lime',
                0.6: 'yellow',
                0.9: 'orange',
                1.0: 'red'
            }
        }).addTo(map3);

// Create slider function
function moveSlider(value) {
    // Define start and end dates
    var startDate = new Date("2018-09-12T00:00:00Z");
    var endDate = new Date("2018-09-29T23:59:59Z");
    
    // Calculate total duration in milliseconds
    var totalDuration = endDate.getTime() - startDate.getTime();
    
    // Calculate the selected time based on the slider value, make it a proportion of 17
    var selectedTime = new Date(startDate.getTime() + (totalDuration * value / 17));

    // Filter geojsonData based on selected time
    var filteredData = geojsonData.features.filter(function (feature) {
        var startTime = new Date(feature.properties.st).getTime();
        var endTime = new Date(feature.properties.fn).getTime();
        return selectedTime >= startTime && selectedTime <= endTime;
    });

    // Clear existing markers from geojsonLayer
    geojsonLayer3.clearLayers();

    // Add markers for filtered data to geojsonLayer
    filteredData.forEach(function (feature) {
        var marker = L.marker([feature.geometry.coordinates[1], feature.geometry.coordinates[0]], { icon: customIcon });
        geojsonLayer3.addLayer(marker);
    });
 //map2 things   
    // Clear existing markers from geojsonLayer
    geojsonLayer.clearLayers();

    // Add markers for filtered data to geojsonLayer
    filteredData.forEach(function (feature) {
        var marker = L.marker([feature.geometry.coordinates[1], feature.geometry.coordinates[0]], { icon: customIcon });
        geojsonLayer.addLayer(marker);
    });
    
    //Create variable to store filtered data points for heatlayer 
    var heatData = filteredData.map(function (feature) {
                return [feature.geometry.coordinates[1], feature.geometry.coordinates[0]];
            });
            //direct heatlayer to pull from heatData
            heatLayer.setLatLngs(heatData);
    //Use value from selectedTime to update the date at the top of page as slider moves
    updateDateDisplay(selectedTime);
}

function updateDateDisplay(date) {
        //create var that updates date display element at top of page
        var dateDisplay = document.getElementById('dateDisplay');
        //Transform date into readable text
        dateDisplay.textContent = date.toDateString();
        }
    //Add layer control to toggle back and forth between layers
        var baseLayers = {
            "Heatmap": heatLayer,
            "Points": geojsonLayer3
        };

        L.control.layers(null, baseLayers).addTo(map3);
        
        map3.addLayer(heatLayer);
        map3.addLayer(geojsonLayer3);

        //create search location icon
        var geocoder = L.Control.geocoder({
            geocoder: L.Control.Geocoder.nominatim(),
            defaultMarkGeocode: false,
            placeholder: "Search Location",
            collapsed: true,
            query: ""
        }).on('markgeocode', function (e) {
            var latlng = e.geocode.center;
            map.setView(latlng, map3.getZoom());
            map.fitBounds(e.geocode.bbox);
        }).addTo(map3);


//Start with empty map
moveSlider(0)

</script>

    




</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb36" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "NC Road Closures Map Tutorial"</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Senam Adedze</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> last-modified</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-location: left</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools:</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="co">      source: true</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co">      toggle: false</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="co">      caption: none</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="an">highlight:</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="co">  theme: "monokai"</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co">  indent: "wrap"</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Retrieval and Prep</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>The road closure data was retrieved from the North Carolina Department of Transportation Traveler Information System (TIMS). The dataset was filtered to include only road closure points that were recorded during the incident period of Hurricane Florence (September 12th - September 29th, 2018).</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>The dataset provided information on how long the road closure lasted. I formatted the start and end date for each road closure into an asPOSIXCT format that both R and Javascript could read and calculate as values.</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a><span class="do">## format start and end into time</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>st <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(df<span class="sc">$</span>start, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)</span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>fn <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(df<span class="sc">$</span>end, <span class="at">format =</span> <span class="st">"%Y-%m-%dT%H:%M:%SZ"</span>)</span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>I then saved this new dataset as a JSON.</span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert data to JSON</span></span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>json_data <span class="ot">&lt;-</span> <span class="fu">toJSON</span>(df2)</span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Write JSON to file with .json extension</span></span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a><span class="fu">write</span>(json_data, <span class="st">"finalproj/data.json"</span>)</span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a><span class="fu">## Create a Leaflet Map</span></span>
<span id="cb36-44"><a href="#cb36-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-45"><a href="#cb36-45" aria-hidden="true" tabindex="-1"></a>Next, in visual studio code, I created an html document and made a simple leaflet map centered on North Carolina. I first copied the CSS stylesheet and the source script, which allows you to use commands and styles specific to leaflet.</span>
<span id="cb36-46"><a href="#cb36-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-47"><a href="#cb36-47" aria-hidden="true" tabindex="-1"></a>CSS Style Sheet</span>
<span id="cb36-48"><a href="#cb36-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-49"><a href="#cb36-49" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-50"><a href="#cb36-50" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>link rel<span class="op">=</span><span class="st">"stylesheet"</span> href<span class="op">=</span><span class="st">"https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"</span></span>
<span id="cb36-51"><a href="#cb36-51" aria-hidden="true" tabindex="-1"></a>integrity<span class="op">=</span><span class="st">"sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="</span></span>
<span id="cb36-52"><a href="#cb36-52" aria-hidden="true" tabindex="-1"></a>crossorigin<span class="op">=</span><span class="st">""</span><span class="op">/&gt;</span></span>
<span id="cb36-53"><a href="#cb36-53" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-54"><a href="#cb36-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-55"><a href="#cb36-55" aria-hidden="true" tabindex="-1"></a>Source Script</span>
<span id="cb36-56"><a href="#cb36-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-57"><a href="#cb36-57" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-58"><a href="#cb36-58" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script src<span class="op">=</span><span class="st">"https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"</span></span>
<span id="cb36-59"><a href="#cb36-59" aria-hidden="true" tabindex="-1"></a>    integrity<span class="op">=</span><span class="st">"sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="</span></span>
<span id="cb36-60"><a href="#cb36-60" aria-hidden="true" tabindex="-1"></a>    crossorigin<span class="op">=</span><span class="st">""</span><span class="op">&gt;&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb36-61"><a href="#cb36-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>script src<span class="op">=</span><span class="st">"closures.js"</span><span class="op">&gt;&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb36-62"><a href="#cb36-62" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-63"><a href="#cb36-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-64"><a href="#cb36-64" aria-hidden="true" tabindex="-1"></a>Then I created a <span class="in">`div`</span> (a container) for the map and gave it an <span class="in">`id`</span>. The <span class="in">`id`</span> allows me to then give the map dimensions in the CSS code using <span class="in">`#map`</span>. To reference an object <span class="in">`id`</span> in CSS, use a #.</span>
<span id="cb36-65"><a href="#cb36-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-66"><a href="#cb36-66" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-67"><a href="#cb36-67" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;!--</span> Create Map Div and id  <span class="op">--&gt;</span></span>
<span id="cb36-68"><a href="#cb36-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">"map"</span><span class="op">&gt;&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb36-69"><a href="#cb36-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-70"><a href="#cb36-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-71"><a href="#cb36-71" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .css}</span></span>
<span id="cb36-72"><a href="#cb36-72" aria-hidden="true" tabindex="-1"></a><span class="co">/* map size */</span></span>
<span id="cb36-73"><a href="#cb36-73" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#</span><span class="er">map { height: 500px; }</span></span>
<span id="cb36-74"><a href="#cb36-74" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-75"><a href="#cb36-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-76"><a href="#cb36-76" aria-hidden="true" tabindex="-1"></a>Next, I created a leaflet map centered on North Carolina and added an OSM tile layer to the map.</span>
<span id="cb36-77"><a href="#cb36-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-78"><a href="#cb36-78" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-79"><a href="#cb36-79" aria-hidden="true" tabindex="-1"></a><span class="co">//Create leaflet map centered on North Carolina</span></span>
<span id="cb36-80"><a href="#cb36-80" aria-hidden="true" tabindex="-1"></a>    var map <span class="op">=</span> L<span class="op">.</span>map<span class="op">(</span><span class="ch">'m</span><span class="er">ap</span><span class="ch">'</span><span class="op">).</span>setView<span class="op">([</span><span class="dv">35</span><span class="op">,</span> <span class="op">-</span><span class="dv">80</span><span class="op">],</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb36-81"><a href="#cb36-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-82"><a href="#cb36-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-83"><a href="#cb36-83" aria-hidden="true" tabindex="-1"></a>    <span class="co">//Add OSM tile layer</span></span>
<span id="cb36-84"><a href="#cb36-84" aria-hidden="true" tabindex="-1"></a>    L<span class="op">.</span>tileLayer<span class="op">(</span><span class="ch">'h</span><span class="er">ttps://tile.openstreetmap.org/{z}/{x}/{y}.png</span><span class="ch">'</span><span class="op">,</span> <span class="op">{</span></span>
<span id="cb36-85"><a href="#cb36-85" aria-hidden="true" tabindex="-1"></a>            maxZoom<span class="op">:</span> <span class="dv">19</span><span class="op">,</span></span>
<span id="cb36-86"><a href="#cb36-86" aria-hidden="true" tabindex="-1"></a>            attribution<span class="op">:</span> <span class="ch">'©</span><span class="er"> OpenStreetMap</span><span class="ch">'</span></span>
<span id="cb36-87"><a href="#cb36-87" aria-hidden="true" tabindex="-1"></a>        <span class="op">}).</span>addTo<span class="op">(</span>map<span class="op">);</span></span>
<span id="cb36-88"><a href="#cb36-88" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-89"><a href="#cb36-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-90"><a href="#cb36-90" aria-hidden="true" tabindex="-1"></a>Next, I imported the JSON of road closures and created a javascript file from the json, naming the file closures.</span>
<span id="cb36-91"><a href="#cb36-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-92"><a href="#cb36-92" aria-hidden="true" tabindex="-1"></a>I then added a script src line of code to connect the html to the JS file with the data.</span>
<span id="cb36-93"><a href="#cb36-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-94"><a href="#cb36-94" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-95"><a href="#cb36-95" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script src<span class="op">=</span><span class="st">"closures.js"</span><span class="op">&gt;&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb36-96"><a href="#cb36-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-97"><a href="#cb36-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-98"><a href="#cb36-98" aria-hidden="true" tabindex="-1"></a>My original dataset had longitude and latitude in two different columns, and they need to be in the same column as a vector to be read by javascript. The following lines of code create a new variable, <span class="in">`geojsonData`</span>, which has all the data from my dataset, but one singular column for latitude and longitude as a vector.</span>
<span id="cb36-99"><a href="#cb36-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-100"><a href="#cb36-100" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-101"><a href="#cb36-101" aria-hidden="true" tabindex="-1"></a> <span class="co">//Create new geojson that turns lat and lon columns into a vector of geometry</span></span>
<span id="cb36-102"><a href="#cb36-102" aria-hidden="true" tabindex="-1"></a>    var geojsonData <span class="op">=</span> <span class="op">{</span></span>
<span id="cb36-103"><a href="#cb36-103" aria-hidden="true" tabindex="-1"></a>        <span class="st">"type"</span><span class="op">:</span> <span class="st">"FeatureCollection"</span><span class="op">,</span></span>
<span id="cb36-104"><a href="#cb36-104" aria-hidden="true" tabindex="-1"></a>        <span class="st">"features"</span><span class="op">:</span> <span class="op">[]</span></span>
<span id="cb36-105"><a href="#cb36-105" aria-hidden="true" tabindex="-1"></a>        <span class="op">};</span></span>
<span id="cb36-106"><a href="#cb36-106" aria-hidden="true" tabindex="-1"></a>        <span class="co">//loop iterating through the whole dataset for each data point</span></span>
<span id="cb36-107"><a href="#cb36-107" aria-hidden="true" tabindex="-1"></a>        closures<span class="op">.</span>forEach<span class="op">(</span>function <span class="op">(</span>dataPoint<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-108"><a href="#cb36-108" aria-hidden="true" tabindex="-1"></a>            var feature <span class="op">=</span> <span class="op">{</span></span>
<span id="cb36-109"><a href="#cb36-109" aria-hidden="true" tabindex="-1"></a>                <span class="st">"type"</span><span class="op">:</span> <span class="st">"Feature"</span><span class="op">,</span></span>
<span id="cb36-110"><a href="#cb36-110" aria-hidden="true" tabindex="-1"></a>                <span class="st">"properties"</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb36-111"><a href="#cb36-111" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"IncidentID"</span><span class="op">:</span> dataPoint<span class="op">.</span>IncidentID<span class="op">,</span></span>
<span id="cb36-112"><a href="#cb36-112" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"start"</span><span class="op">:</span> dataPoint<span class="op">.</span>start<span class="op">,</span></span>
<span id="cb36-113"><a href="#cb36-113" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"end"</span><span class="op">:</span> dataPoint<span class="op">.</span>end<span class="op">,</span></span>
<span id="cb36-114"><a href="#cb36-114" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"RoadName"</span><span class="op">:</span> dataPoint<span class="op">.</span>RoadName<span class="op">,</span></span>
<span id="cb36-115"><a href="#cb36-115" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"CommonName"</span><span class="op">:</span> dataPoint<span class="op">.</span>CommonName<span class="op">,</span></span>
<span id="cb36-116"><a href="#cb36-116" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Direction"</span><span class="op">:</span> dataPoint<span class="op">.</span>Direction<span class="op">,</span></span>
<span id="cb36-117"><a href="#cb36-117" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ConditionName"</span><span class="op">:</span> dataPoint<span class="op">.</span>ConditionName<span class="op">,</span></span>
<span id="cb36-118"><a href="#cb36-118" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"IncidentType"</span><span class="op">:</span> dataPoint<span class="op">.</span>IncidentType<span class="op">,</span></span>
<span id="cb36-119"><a href="#cb36-119" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Event"</span><span class="op">:</span> dataPoint<span class="op">.</span>Event<span class="op">,</span></span>
<span id="cb36-120"><a href="#cb36-120" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"EventName"</span><span class="op">:</span> dataPoint<span class="op">.</span>EventName<span class="op">,</span></span>
<span id="cb36-121"><a href="#cb36-121" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Reason"</span><span class="op">:</span> dataPoint<span class="op">.</span>Reason<span class="op">,</span></span>
<span id="cb36-122"><a href="#cb36-122" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"DOTNotes"</span><span class="op">:</span> dataPoint<span class="op">.</span>DOTNotes<span class="op">,</span></span>
<span id="cb36-123"><a href="#cb36-123" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"day"</span><span class="op">:</span> dataPoint<span class="op">.</span>day<span class="op">,</span></span>
<span id="cb36-124"><a href="#cb36-124" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"flood"</span><span class="op">:</span> dataPoint<span class="op">.</span>flood<span class="op">,</span></span>
<span id="cb36-125"><a href="#cb36-125" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"wind"</span><span class="op">:</span> dataPoint<span class="op">.</span>wind<span class="op">,</span></span>
<span id="cb36-126"><a href="#cb36-126" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"winter"</span><span class="op">:</span> dataPoint<span class="op">.</span>winter<span class="op">,</span></span>
<span id="cb36-127"><a href="#cb36-127" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"fog"</span><span class="op">:</span> dataPoint<span class="op">.</span>fog<span class="op">,</span></span>
<span id="cb36-128"><a href="#cb36-128" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"rainevent"</span><span class="op">:</span> dataPoint<span class="op">.</span>rainevent<span class="op">,</span></span>
<span id="cb36-129"><a href="#cb36-129" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"winterevent"</span><span class="op">:</span> dataPoint<span class="op">.</span>winterevent<span class="op">,</span></span>
<span id="cb36-130"><a href="#cb36-130" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"cycloneevent"</span><span class="op">:</span> dataPoint<span class="op">.</span>cycloneevent<span class="op">,</span></span>
<span id="cb36-131"><a href="#cb36-131" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"dur"</span><span class="op">:</span> dataPoint<span class="op">.</span>dur<span class="op">,</span></span>
<span id="cb36-132"><a href="#cb36-132" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"noweather"</span><span class="op">:</span> dataPoint<span class="op">.</span>noweather<span class="op">,</span></span>
<span id="cb36-133"><a href="#cb36-133" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"st"</span><span class="op">:</span> dataPoint<span class="op">.</span>st<span class="op">,</span></span>
<span id="cb36-134"><a href="#cb36-134" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"fn"</span><span class="op">:</span> dataPoint<span class="op">.</span>fn<span class="op">,</span></span>
<span id="cb36-135"><a href="#cb36-135" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"t"</span><span class="op">:</span> dataPoint<span class="op">.</span>t<span class="op">,</span></span>
<span id="cb36-136"><a href="#cb36-136" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"te"</span><span class="op">:</span> dataPoint<span class="op">.</span>te</span>
<span id="cb36-137"><a href="#cb36-137" aria-hidden="true" tabindex="-1"></a>                <span class="op">},</span></span>
<span id="cb36-138"><a href="#cb36-138" aria-hidden="true" tabindex="-1"></a>                <span class="st">"geometry"</span><span class="op">:</span> <span class="op">{</span> <span class="co">//here is where the new lat/lon vector is located</span></span>
<span id="cb36-139"><a href="#cb36-139" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"type"</span><span class="op">:</span> <span class="st">"Point"</span><span class="op">,</span></span>
<span id="cb36-140"><a href="#cb36-140" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"coordinates"</span><span class="op">:</span> <span class="op">[</span>dataPoint<span class="op">.</span>Longitude<span class="op">,</span> dataPoint<span class="op">.</span>Latitude<span class="op">]</span></span>
<span id="cb36-141"><a href="#cb36-141" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb36-142"><a href="#cb36-142" aria-hidden="true" tabindex="-1"></a>            <span class="op">};</span></span>
<span id="cb36-143"><a href="#cb36-143" aria-hidden="true" tabindex="-1"></a>            geojsonData<span class="op">.</span>features<span class="op">.</span>push<span class="op">(</span>feature<span class="op">);</span> <span class="co">//adds entire feature to the geojsonData object</span></span>
<span id="cb36-144"><a href="#cb36-144" aria-hidden="true" tabindex="-1"></a>        <span class="op">});</span></span>
<span id="cb36-145"><a href="#cb36-145" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-146"><a href="#cb36-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-147"><a href="#cb36-147" aria-hidden="true" tabindex="-1"></a>I then created a custom icon for the road closures. To change the points to an “x” to symbolize a road closure, I made an “x” icon using unicode characters, a built-in library of common symbols. Each symbol has a code. (Note: Some unicode symbols only work with particular fonts, otherwise they will just show up as squares.) I use <span class="in">`L.divIcon`</span> instead of the default <span class="in">`L.Icon`</span> because a <span class="in">`div`</span> icon makes a lightweight icon for markers that uses a simple <span class="in">`div`</span> element instead of an image, which can take longer to load. I have a lot of points, so this method is better for me than a png.</span>
<span id="cb36-148"><a href="#cb36-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-149"><a href="#cb36-149" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-150"><a href="#cb36-150" aria-hidden="true" tabindex="-1"></a><span class="co">//Create unique icon (x for road closures)</span></span>
<span id="cb36-151"><a href="#cb36-151" aria-hidden="true" tabindex="-1"></a>    var customIcon <span class="op">=</span> L<span class="op">.</span>divIcon<span class="op">({</span></span>
<span id="cb36-152"><a href="#cb36-152" aria-hidden="true" tabindex="-1"></a>            className<span class="op">:</span> <span class="ch">'m</span><span class="er">aterial-symbols-outlined</span><span class="ch">'</span><span class="op">,</span> <span class="co">//give class for CSS purposes</span></span>
<span id="cb36-153"><a href="#cb36-153" aria-hidden="true" tabindex="-1"></a>            iconAnchor<span class="op">:</span> <span class="op">[</span><span class="dv">5</span><span class="op">,</span> <span class="dv">5</span><span class="op">],</span> <span class="co">//determines size of icon</span></span>
<span id="cb36-154"><a href="#cb36-154" aria-hidden="true" tabindex="-1"></a>            html<span class="op">:</span> <span class="ch">'&amp;</span><span class="er">#x2716;</span><span class="ch">'</span> <span class="co">//code for "x" icon</span></span>
<span id="cb36-155"><a href="#cb36-155" aria-hidden="true" tabindex="-1"></a>        <span class="op">});</span></span>
<span id="cb36-156"><a href="#cb36-156" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-157"><a href="#cb36-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-158"><a href="#cb36-158" aria-hidden="true" tabindex="-1"></a>I added these CSS elements for the icon</span>
<span id="cb36-159"><a href="#cb36-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-160"><a href="#cb36-160" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .css}</span></span>
<span id="cb36-161"><a href="#cb36-161" aria-hidden="true" tabindex="-1"></a><span class="co">/* icon styles */</span></span>
<span id="cb36-162"><a href="#cb36-162" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span>material<span class="op">-</span>symbols<span class="op">-</span>outlined <span class="op">{</span></span>
<span id="cb36-163"><a href="#cb36-163" aria-hidden="true" tabindex="-1"></a>            font<span class="op">-</span>variation<span class="op">-</span>settings<span class="op">:</span> <span class="ch">'F</span><span class="er">ILL</span><span class="ch">'</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">'w</span><span class="er">ght</span><span class="ch">'</span> <span class="dv">400</span><span class="op">,</span> <span class="ch">'G</span><span class="er">RAD</span><span class="ch">'</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">'o</span><span class="er">psz</span><span class="ch">'</span> <span class="dv">24</span><span class="op">;</span></span>
<span id="cb36-164"><a href="#cb36-164" aria-hidden="true" tabindex="-1"></a>            display<span class="op">:</span> <span class="kw">inline</span><span class="op">-</span>block<span class="op">;</span></span>
<span id="cb36-165"><a href="#cb36-165" aria-hidden="true" tabindex="-1"></a>            color<span class="op">:</span> rgb<span class="op">(</span><span class="dv">220</span><span class="op">,</span> <span class="dv">41</span><span class="op">,</span> <span class="dv">41</span><span class="op">);</span></span>
<span id="cb36-166"><a href="#cb36-166" aria-hidden="true" tabindex="-1"></a>            font<span class="op">-</span>family<span class="op">:</span> <span class="ch">'M</span><span class="er">aterial Icons</span><span class="ch">'</span><span class="op">;</span></span>
<span id="cb36-167"><a href="#cb36-167" aria-hidden="true" tabindex="-1"></a>            font<span class="op">-</span>size<span class="op">:</span> <span class="dv">12</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-168"><a href="#cb36-168" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb36-169"><a href="#cb36-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-170"><a href="#cb36-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-171"><a href="#cb36-171" aria-hidden="true" tabindex="-1"></a>Then I created a geojson layer, using the point to layer leaflet plugin to place the points on the map. I also created a popup that provided content on each particular closure when the point was clicked.</span>
<span id="cb36-172"><a href="#cb36-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-173"><a href="#cb36-173" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-174"><a href="#cb36-174" aria-hidden="true" tabindex="-1"></a><span class="co">// Create geojson layer from closure data</span></span>
<span id="cb36-175"><a href="#cb36-175" aria-hidden="true" tabindex="-1"></a>var geojsonLayer <span class="op">=</span> L<span class="op">.</span>geoJson<span class="op">(</span>geojsonData<span class="op">,</span> <span class="op">{</span></span>
<span id="cb36-176"><a href="#cb36-176" aria-hidden="true" tabindex="-1"></a>    pointToLayer<span class="op">:</span> function <span class="op">(</span>feature<span class="op">,</span> latlng<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-177"><a href="#cb36-177" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Create marker with custom icon</span></span>
<span id="cb36-178"><a href="#cb36-178" aria-hidden="true" tabindex="-1"></a>        var marker <span class="op">=</span> L<span class="op">.</span>marker<span class="op">(</span>latlng<span class="op">,</span> <span class="op">{</span> icon<span class="op">:</span> customIcon <span class="op">});</span></span>
<span id="cb36-179"><a href="#cb36-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-180"><a href="#cb36-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-181"><a href="#cb36-181" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Bind a popup to the marker</span></span>
<span id="cb36-182"><a href="#cb36-182" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">.</span>bindPopup<span class="op">(</span><span class="st">"&lt;b&gt;Road Name:&lt;/b&gt; "</span> <span class="op">+</span> feature<span class="op">.</span>properties<span class="op">.</span>RoadName <span class="op">+</span> <span class="st">"&lt;br&gt;"</span> <span class="op">+</span></span>
<span id="cb36-183"><a href="#cb36-183" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"&lt;b&gt;Direction:&lt;/b&gt; "</span> <span class="op">+</span> feature<span class="op">.</span>properties<span class="op">.</span>Direction <span class="op">+</span> <span class="st">"&lt;br&gt;"</span> <span class="op">+</span></span>
<span id="cb36-184"><a href="#cb36-184" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"&lt;b&gt;Start Time:&lt;/b&gt; "</span> <span class="op">+</span> new Date<span class="op">(</span>feature<span class="op">.</span>properties<span class="op">.</span>st<span class="op">).</span>toDateString<span class="op">()</span> <span class="op">+</span> <span class="st">"&lt;br&gt;"</span> <span class="op">+</span></span>
<span id="cb36-185"><a href="#cb36-185" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"&lt;b&gt;End Time:&lt;/b&gt; "</span> <span class="op">+</span> new Date<span class="op">(</span>feature<span class="op">.</span>properties<span class="op">.</span>fn<span class="op">).</span>toDateString<span class="op">()</span> <span class="op">+</span> <span class="st">"&lt;br&gt;"</span> <span class="op">+</span></span>
<span id="cb36-186"><a href="#cb36-186" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"&lt;b&gt;Reason:&lt;/b&gt; "</span> <span class="op">+</span> feature<span class="op">.</span>properties<span class="op">.</span>Reason<span class="op">);</span></span>
<span id="cb36-187"><a href="#cb36-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-188"><a href="#cb36-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-189"><a href="#cb36-189" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> marker<span class="op">;</span></span>
<span id="cb36-190"><a href="#cb36-190" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb36-191"><a href="#cb36-191" aria-hidden="true" tabindex="-1"></a><span class="op">}).</span>addTo<span class="op">(</span>map<span class="op">);</span></span>
<span id="cb36-192"><a href="#cb36-192" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-193"><a href="#cb36-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-194"><a href="#cb36-194" aria-hidden="true" tabindex="-1"></a>Here is what the first iteration of my map looked like with each road closure point appearing as an “x” on the map. Zoom in and click to get information about a road closure!</span>
<span id="cb36-195"><a href="#cb36-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-196"><a href="#cb36-196" aria-hidden="true" tabindex="-1"></a><span class="fu">### First Iteration</span></span>
<span id="cb36-197"><a href="#cb36-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-198"><a href="#cb36-198" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb36-199"><a href="#cb36-199" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!DOCTYPE html&gt;</span></span>
<span id="cb36-200"><a href="#cb36-200" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;html lang="en"&gt;</span></span>
<span id="cb36-201"><a href="#cb36-201" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;head&gt;</span></span>
<span id="cb36-202"><a href="#cb36-202" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;meta charset="UTF-8"&gt;</span></span>
<span id="cb36-203"><a href="#cb36-203" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></span>
<span id="cb36-204"><a href="#cb36-204" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;title&gt;Document&lt;/title&gt;</span></span>
<span id="cb36-205"><a href="#cb36-205" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"</span></span>
<span id="cb36-206"><a href="#cb36-206" aria-hidden="true" tabindex="-1"></a><span class="in">integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="crossorigin=""/&gt;</span></span>
<span id="cb36-207"><a href="#cb36-207" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;style&gt;</span></span>
<span id="cb36-208"><a href="#cb36-208" aria-hidden="true" tabindex="-1"></a><span class="in">/* map size */</span></span>
<span id="cb36-209"><a href="#cb36-209" aria-hidden="true" tabindex="-1"></a><span class="in">#map { height: 500px; }</span></span>
<span id="cb36-210"><a href="#cb36-210" aria-hidden="true" tabindex="-1"></a><span class="in">/* icon styles */</span></span>
<span id="cb36-211"><a href="#cb36-211" aria-hidden="true" tabindex="-1"></a><span class="in">.material-symbols-outlined {</span></span>
<span id="cb36-212"><a href="#cb36-212" aria-hidden="true" tabindex="-1"></a><span class="in">font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;display: inline-block;color: rgb(220, 41, 41);font-family: 'Material Icons';font-size: 12px;}</span></span>
<span id="cb36-213"><a href="#cb36-213" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;</span></span>
<span id="cb36-214"><a href="#cb36-214" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/head&gt;</span></span>
<span id="cb36-215"><a href="#cb36-215" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;body&gt;</span></span>
<span id="cb36-216"><a href="#cb36-216" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"</span></span>
<span id="cb36-217"><a href="#cb36-217" aria-hidden="true" tabindex="-1"></a><span class="in">integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="crossorigin=""&gt;&lt;/script&gt;</span></span>
<span id="cb36-218"><a href="#cb36-218" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script src="closures.js"&gt;&lt;/script&gt;</span></span>
<span id="cb36-219"><a href="#cb36-219" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!-- Create Map Div and id  --&gt;</span></span>
<span id="cb36-220"><a href="#cb36-220" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;div id="map"&gt;&lt;/div&gt;</span></span>
<span id="cb36-221"><a href="#cb36-221" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script&gt;</span></span>
<span id="cb36-222"><a href="#cb36-222" aria-hidden="true" tabindex="-1"></a><span class="in">//Create leaflet map centered on North Carolina</span></span>
<span id="cb36-223"><a href="#cb36-223" aria-hidden="true" tabindex="-1"></a><span class="in">var map = L.map('map').setView([35, -80], 7);</span></span>
<span id="cb36-224"><a href="#cb36-224" aria-hidden="true" tabindex="-1"></a><span class="in">//Add OSM tile layer</span></span>
<span id="cb36-225"><a href="#cb36-225" aria-hidden="true" tabindex="-1"></a><span class="in">L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19,attribution: '© OpenStreetMap'}).addTo(map);</span></span>
<span id="cb36-226"><a href="#cb36-226" aria-hidden="true" tabindex="-1"></a><span class="in">//Create new geojson that turns lat and lon columns into a vector of geometry</span></span>
<span id="cb36-227"><a href="#cb36-227" aria-hidden="true" tabindex="-1"></a><span class="in">var geojsonData = {</span></span>
<span id="cb36-228"><a href="#cb36-228" aria-hidden="true" tabindex="-1"></a><span class="in">"type": "FeatureCollection",</span></span>
<span id="cb36-229"><a href="#cb36-229" aria-hidden="true" tabindex="-1"></a><span class="in">"features": []};</span></span>
<span id="cb36-230"><a href="#cb36-230" aria-hidden="true" tabindex="-1"></a><span class="in">//loop iterating through the whole dataset for each data point</span></span>
<span id="cb36-231"><a href="#cb36-231" aria-hidden="true" tabindex="-1"></a><span class="in">closures.forEach(function (dataPoint) {</span></span>
<span id="cb36-232"><a href="#cb36-232" aria-hidden="true" tabindex="-1"></a><span class="in">var feature = {"type": "Feature","properties": {"IncidentID": dataPoint.IncidentID,"start": dataPoint.start,"end": dataPoint.end,"RoadName": dataPoint.RoadName,"CommonName": dataPoint.CommonName,"Direction": dataPoint.Direction,"ConditionName": dataPoint.ConditionName,"IncidentType": dataPoint.IncidentType,</span></span>
<span id="cb36-233"><a href="#cb36-233" aria-hidden="true" tabindex="-1"></a><span class="in">                    "Event": dataPoint.Event,</span></span>
<span id="cb36-234"><a href="#cb36-234" aria-hidden="true" tabindex="-1"></a><span class="in">                    "EventName": dataPoint.EventName,</span></span>
<span id="cb36-235"><a href="#cb36-235" aria-hidden="true" tabindex="-1"></a><span class="in">                    "Reason": dataPoint.Reason,</span></span>
<span id="cb36-236"><a href="#cb36-236" aria-hidden="true" tabindex="-1"></a><span class="in">                    "DOTNotes": dataPoint.DOTNotes,</span></span>
<span id="cb36-237"><a href="#cb36-237" aria-hidden="true" tabindex="-1"></a><span class="in">                    "day": dataPoint.day,</span></span>
<span id="cb36-238"><a href="#cb36-238" aria-hidden="true" tabindex="-1"></a><span class="in">                    "flood": dataPoint.flood,</span></span>
<span id="cb36-239"><a href="#cb36-239" aria-hidden="true" tabindex="-1"></a><span class="in">                    "wind": dataPoint.wind,</span></span>
<span id="cb36-240"><a href="#cb36-240" aria-hidden="true" tabindex="-1"></a><span class="in">                    "winter": dataPoint.winter,</span></span>
<span id="cb36-241"><a href="#cb36-241" aria-hidden="true" tabindex="-1"></a><span class="in">                    "fog": dataPoint.fog,</span></span>
<span id="cb36-242"><a href="#cb36-242" aria-hidden="true" tabindex="-1"></a><span class="in">                    "rainevent": dataPoint.rainevent,</span></span>
<span id="cb36-243"><a href="#cb36-243" aria-hidden="true" tabindex="-1"></a><span class="in">                    "winterevent": dataPoint.winterevent,</span></span>
<span id="cb36-244"><a href="#cb36-244" aria-hidden="true" tabindex="-1"></a><span class="in">                    "cycloneevent": dataPoint.cycloneevent,</span></span>
<span id="cb36-245"><a href="#cb36-245" aria-hidden="true" tabindex="-1"></a><span class="in">                    "dur": dataPoint.dur,</span></span>
<span id="cb36-246"><a href="#cb36-246" aria-hidden="true" tabindex="-1"></a><span class="in">                    "noweather": dataPoint.noweather,</span></span>
<span id="cb36-247"><a href="#cb36-247" aria-hidden="true" tabindex="-1"></a><span class="in">                    "st": dataPoint.st,</span></span>
<span id="cb36-248"><a href="#cb36-248" aria-hidden="true" tabindex="-1"></a><span class="in">                    "fn": dataPoint.fn,</span></span>
<span id="cb36-249"><a href="#cb36-249" aria-hidden="true" tabindex="-1"></a><span class="in">                    "t": dataPoint.t,</span></span>
<span id="cb36-250"><a href="#cb36-250" aria-hidden="true" tabindex="-1"></a><span class="in">                    "te": dataPoint.te</span></span>
<span id="cb36-251"><a href="#cb36-251" aria-hidden="true" tabindex="-1"></a><span class="in">                },</span></span>
<span id="cb36-252"><a href="#cb36-252" aria-hidden="true" tabindex="-1"></a><span class="in">                "geometry": { //here is where the new lat/lon vector is located</span></span>
<span id="cb36-253"><a href="#cb36-253" aria-hidden="true" tabindex="-1"></a><span class="in">                    "type": "Point",</span></span>
<span id="cb36-254"><a href="#cb36-254" aria-hidden="true" tabindex="-1"></a><span class="in">                    "coordinates": [dataPoint.Longitude, dataPoint.Latitude]</span></span>
<span id="cb36-255"><a href="#cb36-255" aria-hidden="true" tabindex="-1"></a><span class="in">                }</span></span>
<span id="cb36-256"><a href="#cb36-256" aria-hidden="true" tabindex="-1"></a><span class="in">            };</span></span>
<span id="cb36-257"><a href="#cb36-257" aria-hidden="true" tabindex="-1"></a><span class="in">            geojsonData.features.push(feature); //adds entire feature to the geojsonData object</span></span>
<span id="cb36-258"><a href="#cb36-258" aria-hidden="true" tabindex="-1"></a><span class="in">        });</span></span>
<span id="cb36-259"><a href="#cb36-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-260"><a href="#cb36-260" aria-hidden="true" tabindex="-1"></a><span class="in">   // Create unique icon (x for road closures)</span></span>
<span id="cb36-261"><a href="#cb36-261" aria-hidden="true" tabindex="-1"></a><span class="in">var customIcon = L.divIcon({</span></span>
<span id="cb36-262"><a href="#cb36-262" aria-hidden="true" tabindex="-1"></a><span class="in">    className: 'material-symbols-outlined',</span></span>
<span id="cb36-263"><a href="#cb36-263" aria-hidden="true" tabindex="-1"></a><span class="in">    iconAnchor: [5, 5],</span></span>
<span id="cb36-264"><a href="#cb36-264" aria-hidden="true" tabindex="-1"></a><span class="in">    html: '&amp;#x2716;'</span></span>
<span id="cb36-265"><a href="#cb36-265" aria-hidden="true" tabindex="-1"></a><span class="in">});</span></span>
<span id="cb36-266"><a href="#cb36-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-267"><a href="#cb36-267" aria-hidden="true" tabindex="-1"></a><span class="in">// Create geojson layer from closure data</span></span>
<span id="cb36-268"><a href="#cb36-268" aria-hidden="true" tabindex="-1"></a><span class="in">var geojsonLayer = L.geoJson(geojsonData, {</span></span>
<span id="cb36-269"><a href="#cb36-269" aria-hidden="true" tabindex="-1"></a><span class="in">    pointToLayer: function (feature, latlng) {</span></span>
<span id="cb36-270"><a href="#cb36-270" aria-hidden="true" tabindex="-1"></a><span class="in">        // Create marker with custom icon</span></span>
<span id="cb36-271"><a href="#cb36-271" aria-hidden="true" tabindex="-1"></a><span class="in">        var marker = L.marker(latlng, { icon: customIcon });</span></span>
<span id="cb36-272"><a href="#cb36-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-273"><a href="#cb36-273" aria-hidden="true" tabindex="-1"></a><span class="in">        // Bind a popup to the marker</span></span>
<span id="cb36-274"><a href="#cb36-274" aria-hidden="true" tabindex="-1"></a><span class="in">        marker.bindPopup("&lt;b&gt;Road Name:&lt;/b&gt; " + feature.properties.RoadName + "&lt;br&gt;" +</span></span>
<span id="cb36-275"><a href="#cb36-275" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Direction:&lt;/b&gt; " + feature.properties.Direction + "&lt;br&gt;" +</span></span>
<span id="cb36-276"><a href="#cb36-276" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Start Time:&lt;/b&gt; " + new Date(feature.properties.st).toDateString() + "&lt;br&gt;" +</span></span>
<span id="cb36-277"><a href="#cb36-277" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;End Time:&lt;/b&gt; " + new Date(feature.properties.fn).toDateString() + "&lt;br&gt;" +</span></span>
<span id="cb36-278"><a href="#cb36-278" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Reason:&lt;/b&gt; " + feature.properties.Reason);</span></span>
<span id="cb36-279"><a href="#cb36-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-280"><a href="#cb36-280" aria-hidden="true" tabindex="-1"></a><span class="in">        return marker;</span></span>
<span id="cb36-281"><a href="#cb36-281" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb36-282"><a href="#cb36-282" aria-hidden="true" tabindex="-1"></a><span class="in">}).addTo(map);</span></span>
<span id="cb36-283"><a href="#cb36-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-284"><a href="#cb36-284" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-285"><a href="#cb36-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-286"><a href="#cb36-286" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/script&gt;</span></span>
<span id="cb36-287"><a href="#cb36-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-288"><a href="#cb36-288" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-289"><a href="#cb36-289" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/body&gt;</span></span>
<span id="cb36-290"><a href="#cb36-290" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/html&gt;</span></span>
<span id="cb36-291"><a href="#cb36-291" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-292"><a href="#cb36-292" aria-hidden="true" tabindex="-1"></a><span class="fu">## Create Slider</span></span>
<span id="cb36-293"><a href="#cb36-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-294"><a href="#cb36-294" aria-hidden="true" tabindex="-1"></a>Next, I added the time component. I created a slider, gave it an id for CSS (style) purposes. The min and max reflected the range of days I wanted to capture (September 12th - September 29th, 2018, 17 days).</span>
<span id="cb36-295"><a href="#cb36-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-296"><a href="#cb36-296" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-297"><a href="#cb36-297" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>input id<span class="op">=</span><span class="st">"dateSlider"</span> type<span class="op">=</span><span class="st">"range"</span> value<span class="op">=</span><span class="st">"0"</span> name<span class="op">=</span><span class="st">"Day"</span> min<span class="op">=</span><span class="st">"0"</span> max<span class="op">=</span><span class="st">"17"</span> oninput<span class="op">=</span><span class="st">"moveSlider(this.value)"</span><span class="op">&gt;</span></span>
<span id="cb36-298"><a href="#cb36-298" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-299"><a href="#cb36-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-300"><a href="#cb36-300" aria-hidden="true" tabindex="-1"></a>I then created the function, <span class="in">`moveSlider`</span> to reflect the number of road closures over time. Each road closure point had a start time and end time. I designed the function so that the point appears on the day it starts and disappears on the day it ends.</span>
<span id="cb36-301"><a href="#cb36-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-302"><a href="#cb36-302" aria-hidden="true" tabindex="-1"></a>First I make the dates compatible with the slider range (0 to 17). I define variables for the start and end date of my date range so I can manipulate them more easily. I need to make September 12th = 0 and September 29th = 17. <span class="in">`getTime()`</span> is a JavaScript command that works with Date objects and returns the numeric value corresponding to the specified time. I calculate each date as a proportion of 17 in the variable <span class="in">`selectedTime`</span> so it corresponds to the value of the slider.</span>
<span id="cb36-303"><a href="#cb36-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-304"><a href="#cb36-304" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-305"><a href="#cb36-305" aria-hidden="true" tabindex="-1"></a><span class="co">// Create slider function</span></span>
<span id="cb36-306"><a href="#cb36-306" aria-hidden="true" tabindex="-1"></a>function moveSlider<span class="op">(</span>value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-307"><a href="#cb36-307" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Define start and end dates</span></span>
<span id="cb36-308"><a href="#cb36-308" aria-hidden="true" tabindex="-1"></a>    var startDate <span class="op">=</span> new Date<span class="op">(</span><span class="st">"2018-09-12T00:00:00Z"</span><span class="op">);</span></span>
<span id="cb36-309"><a href="#cb36-309" aria-hidden="true" tabindex="-1"></a>    var endDate <span class="op">=</span> new Date<span class="op">(</span><span class="st">"2018-09-29T23:59:59Z"</span><span class="op">);</span></span>
<span id="cb36-310"><a href="#cb36-310" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb36-311"><a href="#cb36-311" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Calculate total duration in milliseconds</span></span>
<span id="cb36-312"><a href="#cb36-312" aria-hidden="true" tabindex="-1"></a>    var totalDuration <span class="op">=</span> endDate<span class="op">.</span>getTime<span class="op">()</span> <span class="op">-</span> startDate<span class="op">.</span>getTime<span class="op">();</span></span>
<span id="cb36-313"><a href="#cb36-313" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb36-314"><a href="#cb36-314" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Calculate the selected time based on the slider value, make it a proportion of 17</span></span>
<span id="cb36-315"><a href="#cb36-315" aria-hidden="true" tabindex="-1"></a>    var selectedTime <span class="op">=</span> new Date<span class="op">(</span>startDate<span class="op">.</span>getTime<span class="op">()</span> <span class="op">+</span> <span class="op">(</span>totalDuration <span class="op">*</span> value <span class="op">/</span> <span class="dv">17</span><span class="op">));</span></span>
<span id="cb36-316"><a href="#cb36-316" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-317"><a href="#cb36-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-318"><a href="#cb36-318" aria-hidden="true" tabindex="-1"></a>The function then filters geojsonData to find features that fall within the <span class="in">`selectedTime`</span> range and adds markers for these features to the geojsonLayer. If the <span class="in">`selectedTime`</span> is greater than the <span class="in">`startTime`</span> and less than the <span class="in">`endTime`</span>, the point appears. If it falls outside that range, the point does not appear.</span>
<span id="cb36-319"><a href="#cb36-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-320"><a href="#cb36-320" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-321"><a href="#cb36-321" aria-hidden="true" tabindex="-1"></a><span class="co">// Filter geojsonData based on selected time</span></span>
<span id="cb36-322"><a href="#cb36-322" aria-hidden="true" tabindex="-1"></a>    var filteredData <span class="op">=</span> geojsonData<span class="op">.</span>features<span class="op">.</span>filter<span class="op">(</span>function <span class="op">(</span>feature<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-323"><a href="#cb36-323" aria-hidden="true" tabindex="-1"></a>        var startTime <span class="op">=</span> new Date<span class="op">(</span>feature<span class="op">.</span>properties<span class="op">.</span>st<span class="op">).</span>getTime<span class="op">();</span></span>
<span id="cb36-324"><a href="#cb36-324" aria-hidden="true" tabindex="-1"></a>        var endTime <span class="op">=</span> new Date<span class="op">(</span>feature<span class="op">.</span>properties<span class="op">.</span>fn<span class="op">).</span>getTime<span class="op">();</span></span>
<span id="cb36-325"><a href="#cb36-325" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> selectedTime <span class="op">&gt;=</span> startTime <span class="op">&amp;&amp;</span> selectedTime <span class="op">&lt;=</span> endTime<span class="op">;</span></span>
<span id="cb36-326"><a href="#cb36-326" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb36-327"><a href="#cb36-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-328"><a href="#cb36-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-329"><a href="#cb36-329" aria-hidden="true" tabindex="-1"></a>Once my points are coded to appear and disappear when I want them to, I add a line of code that clears the markers on the map each time the slider is moved, so the points don’t populate on top of each other.</span>
<span id="cb36-330"><a href="#cb36-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-331"><a href="#cb36-331" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-332"><a href="#cb36-332" aria-hidden="true" tabindex="-1"></a> <span class="co">// Clear existing markers from geojsonLayer</span></span>
<span id="cb36-333"><a href="#cb36-333" aria-hidden="true" tabindex="-1"></a>    geojsonLayer<span class="op">.</span>clearLayers<span class="op">();</span></span>
<span id="cb36-334"><a href="#cb36-334" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-335"><a href="#cb36-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-336"><a href="#cb36-336" aria-hidden="true" tabindex="-1"></a>After clearing the map, I add the markers to the map according the logic of <span class="in">`filterdData`</span>. This is the end of my slider function, which iterates through the entire dataset.</span>
<span id="cb36-337"><a href="#cb36-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-338"><a href="#cb36-338" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-339"><a href="#cb36-339" aria-hidden="true" tabindex="-1"></a><span class="co">// Add markers for filtered data to geojsonLayer</span></span>
<span id="cb36-340"><a href="#cb36-340" aria-hidden="true" tabindex="-1"></a>    filteredData<span class="op">.</span>forEach<span class="op">(</span>function <span class="op">(</span>feature<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-341"><a href="#cb36-341" aria-hidden="true" tabindex="-1"></a>        var marker <span class="op">=</span> L<span class="op">.</span>marker<span class="op">([</span>feature<span class="op">.</span>geometry<span class="op">.</span>coordinates<span class="op">[</span><span class="dv">1</span><span class="op">],</span> feature<span class="op">.</span>geometry<span class="op">.</span>coordinates<span class="op">[</span><span class="dv">0</span><span class="op">]],</span> <span class="op">{</span> icon<span class="op">:</span> customIcon <span class="op">});</span></span>
<span id="cb36-342"><a href="#cb36-342" aria-hidden="true" tabindex="-1"></a>        geojsonLayer<span class="op">.</span>addLayer<span class="op">(</span>marker<span class="op">);</span></span>
<span id="cb36-343"><a href="#cb36-343" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb36-344"><a href="#cb36-344" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb36-345"><a href="#cb36-345" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-346"><a href="#cb36-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-347"><a href="#cb36-347" aria-hidden="true" tabindex="-1"></a>I then write code to make sure my slider starts at zero each time the page is refreshed.</span>
<span id="cb36-348"><a href="#cb36-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-349"><a href="#cb36-349" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-350"><a href="#cb36-350" aria-hidden="true" tabindex="-1"></a><span class="co">//Start with empty map</span></span>
<span id="cb36-351"><a href="#cb36-351" aria-hidden="true" tabindex="-1"></a>moveSlider<span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb36-352"><a href="#cb36-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-353"><a href="#cb36-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-354"><a href="#cb36-354" aria-hidden="true" tabindex="-1"></a><span class="fu">### Second Iteration</span></span>
<span id="cb36-355"><a href="#cb36-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-356"><a href="#cb36-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb36-357"><a href="#cb36-357" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!DOCTYPE html&gt;</span></span>
<span id="cb36-358"><a href="#cb36-358" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;html lang="en"&gt;</span></span>
<span id="cb36-359"><a href="#cb36-359" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;head&gt;</span></span>
<span id="cb36-360"><a href="#cb36-360" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;meta charset="UTF-8"&gt;</span></span>
<span id="cb36-361"><a href="#cb36-361" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></span>
<span id="cb36-362"><a href="#cb36-362" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;title&gt;Document&lt;/title&gt;</span></span>
<span id="cb36-363"><a href="#cb36-363" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"</span></span>
<span id="cb36-364"><a href="#cb36-364" aria-hidden="true" tabindex="-1"></a><span class="in">   integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="</span></span>
<span id="cb36-365"><a href="#cb36-365" aria-hidden="true" tabindex="-1"></a><span class="in">   crossorigin=""/&gt;</span></span>
<span id="cb36-366"><a href="#cb36-366" aria-hidden="true" tabindex="-1"></a><span class="in">   &lt;style&gt;</span></span>
<span id="cb36-367"><a href="#cb36-367" aria-hidden="true" tabindex="-1"></a><span class="in">    /* map size */</span></span>
<span id="cb36-368"><a href="#cb36-368" aria-hidden="true" tabindex="-1"></a><span class="in">    #map2 { height: 500px; }</span></span>
<span id="cb36-369"><a href="#cb36-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-370"><a href="#cb36-370" aria-hidden="true" tabindex="-1"></a><span class="in">    /* icon styles */</span></span>
<span id="cb36-371"><a href="#cb36-371" aria-hidden="true" tabindex="-1"></a><span class="in">    .material-symbols-outlined {</span></span>
<span id="cb36-372"><a href="#cb36-372" aria-hidden="true" tabindex="-1"></a><span class="in">            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;</span></span>
<span id="cb36-373"><a href="#cb36-373" aria-hidden="true" tabindex="-1"></a><span class="in">            display: inline-block;</span></span>
<span id="cb36-374"><a href="#cb36-374" aria-hidden="true" tabindex="-1"></a><span class="in">            color: rgb(220, 41, 41);</span></span>
<span id="cb36-375"><a href="#cb36-375" aria-hidden="true" tabindex="-1"></a><span class="in">            font-family: 'Material Icons';</span></span>
<span id="cb36-376"><a href="#cb36-376" aria-hidden="true" tabindex="-1"></a><span class="in">            font-size: 12px;</span></span>
<span id="cb36-377"><a href="#cb36-377" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb36-378"><a href="#cb36-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-379"><a href="#cb36-379" aria-hidden="true" tabindex="-1"></a><span class="in">   &lt;/style&gt;</span></span>
<span id="cb36-380"><a href="#cb36-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-381"><a href="#cb36-381" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/head&gt;</span></span>
<span id="cb36-382"><a href="#cb36-382" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;body&gt;</span></span>
<span id="cb36-383"><a href="#cb36-383" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"</span></span>
<span id="cb36-384"><a href="#cb36-384" aria-hidden="true" tabindex="-1"></a><span class="in">    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="</span></span>
<span id="cb36-385"><a href="#cb36-385" aria-hidden="true" tabindex="-1"></a><span class="in">    crossorigin=""&gt;&lt;/script&gt;</span></span>
<span id="cb36-386"><a href="#cb36-386" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;script src="closures.js"&gt;&lt;/script&gt;</span></span>
<span id="cb36-387"><a href="#cb36-387" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;!-- Create slider --&gt;</span></span>
<span id="cb36-388"><a href="#cb36-388" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;input id="dateSlider" type="range" value="0" name="Day" min="0" max="17" oninput="moveSlider(this.value)"&gt;</span></span>
<span id="cb36-389"><a href="#cb36-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-390"><a href="#cb36-390" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;!-- Create Map Div and id  --&gt;</span></span>
<span id="cb36-391"><a href="#cb36-391" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;div id="map2"&gt;&lt;/div&gt;</span></span>
<span id="cb36-392"><a href="#cb36-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-393"><a href="#cb36-393" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script&gt;</span></span>
<span id="cb36-394"><a href="#cb36-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-395"><a href="#cb36-395" aria-hidden="true" tabindex="-1"></a><span class="in">    //Create leaflet map centered on North Carolina</span></span>
<span id="cb36-396"><a href="#cb36-396" aria-hidden="true" tabindex="-1"></a><span class="in">    var map2 = L.map('map2').setView([35, -80], 7);</span></span>
<span id="cb36-397"><a href="#cb36-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-398"><a href="#cb36-398" aria-hidden="true" tabindex="-1"></a><span class="in">    //Add OSM tile layer</span></span>
<span id="cb36-399"><a href="#cb36-399" aria-hidden="true" tabindex="-1"></a><span class="in">    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {</span></span>
<span id="cb36-400"><a href="#cb36-400" aria-hidden="true" tabindex="-1"></a><span class="in">            maxZoom: 19,</span></span>
<span id="cb36-401"><a href="#cb36-401" aria-hidden="true" tabindex="-1"></a><span class="in">            attribution: '© OpenStreetMap'</span></span>
<span id="cb36-402"><a href="#cb36-402" aria-hidden="true" tabindex="-1"></a><span class="in">        }).addTo(map2);</span></span>
<span id="cb36-403"><a href="#cb36-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-404"><a href="#cb36-404" aria-hidden="true" tabindex="-1"></a><span class="in">    //Create new geojson that turns lat and lon columns into a vector of geometry</span></span>
<span id="cb36-405"><a href="#cb36-405" aria-hidden="true" tabindex="-1"></a><span class="in">    var geojsonData = {</span></span>
<span id="cb36-406"><a href="#cb36-406" aria-hidden="true" tabindex="-1"></a><span class="in">        "type": "FeatureCollection",</span></span>
<span id="cb36-407"><a href="#cb36-407" aria-hidden="true" tabindex="-1"></a><span class="in">        "features": []</span></span>
<span id="cb36-408"><a href="#cb36-408" aria-hidden="true" tabindex="-1"></a><span class="in">        };</span></span>
<span id="cb36-409"><a href="#cb36-409" aria-hidden="true" tabindex="-1"></a><span class="in">        //loop iterating through the whole dataset for each data point</span></span>
<span id="cb36-410"><a href="#cb36-410" aria-hidden="true" tabindex="-1"></a><span class="in">        closures.forEach(function (dataPoint) {</span></span>
<span id="cb36-411"><a href="#cb36-411" aria-hidden="true" tabindex="-1"></a><span class="in">            var feature = {</span></span>
<span id="cb36-412"><a href="#cb36-412" aria-hidden="true" tabindex="-1"></a><span class="in">                "type": "Feature",</span></span>
<span id="cb36-413"><a href="#cb36-413" aria-hidden="true" tabindex="-1"></a><span class="in">                "properties": {</span></span>
<span id="cb36-414"><a href="#cb36-414" aria-hidden="true" tabindex="-1"></a><span class="in">                    "IncidentID": dataPoint.IncidentID,</span></span>
<span id="cb36-415"><a href="#cb36-415" aria-hidden="true" tabindex="-1"></a><span class="in">                    "start": dataPoint.start,</span></span>
<span id="cb36-416"><a href="#cb36-416" aria-hidden="true" tabindex="-1"></a><span class="in">                    "end": dataPoint.end,</span></span>
<span id="cb36-417"><a href="#cb36-417" aria-hidden="true" tabindex="-1"></a><span class="in">                    "RoadName": dataPoint.RoadName,</span></span>
<span id="cb36-418"><a href="#cb36-418" aria-hidden="true" tabindex="-1"></a><span class="in">                    "CommonName": dataPoint.CommonName,</span></span>
<span id="cb36-419"><a href="#cb36-419" aria-hidden="true" tabindex="-1"></a><span class="in">                    "Direction": dataPoint.Direction,</span></span>
<span id="cb36-420"><a href="#cb36-420" aria-hidden="true" tabindex="-1"></a><span class="in">                    "ConditionName": dataPoint.ConditionName,</span></span>
<span id="cb36-421"><a href="#cb36-421" aria-hidden="true" tabindex="-1"></a><span class="in">                    "IncidentType": dataPoint.IncidentType,</span></span>
<span id="cb36-422"><a href="#cb36-422" aria-hidden="true" tabindex="-1"></a><span class="in">                    "Event": dataPoint.Event,</span></span>
<span id="cb36-423"><a href="#cb36-423" aria-hidden="true" tabindex="-1"></a><span class="in">                    "EventName": dataPoint.EventName,</span></span>
<span id="cb36-424"><a href="#cb36-424" aria-hidden="true" tabindex="-1"></a><span class="in">                    "Reason": dataPoint.Reason,</span></span>
<span id="cb36-425"><a href="#cb36-425" aria-hidden="true" tabindex="-1"></a><span class="in">                    "DOTNotes": dataPoint.DOTNotes,</span></span>
<span id="cb36-426"><a href="#cb36-426" aria-hidden="true" tabindex="-1"></a><span class="in">                    "day": dataPoint.day,</span></span>
<span id="cb36-427"><a href="#cb36-427" aria-hidden="true" tabindex="-1"></a><span class="in">                    "flood": dataPoint.flood,</span></span>
<span id="cb36-428"><a href="#cb36-428" aria-hidden="true" tabindex="-1"></a><span class="in">                    "wind": dataPoint.wind,</span></span>
<span id="cb36-429"><a href="#cb36-429" aria-hidden="true" tabindex="-1"></a><span class="in">                    "winter": dataPoint.winter,</span></span>
<span id="cb36-430"><a href="#cb36-430" aria-hidden="true" tabindex="-1"></a><span class="in">                    "fog": dataPoint.fog,</span></span>
<span id="cb36-431"><a href="#cb36-431" aria-hidden="true" tabindex="-1"></a><span class="in">                    "rainevent": dataPoint.rainevent,</span></span>
<span id="cb36-432"><a href="#cb36-432" aria-hidden="true" tabindex="-1"></a><span class="in">                    "winterevent": dataPoint.winterevent,</span></span>
<span id="cb36-433"><a href="#cb36-433" aria-hidden="true" tabindex="-1"></a><span class="in">                    "cycloneevent": dataPoint.cycloneevent,</span></span>
<span id="cb36-434"><a href="#cb36-434" aria-hidden="true" tabindex="-1"></a><span class="in">                    "dur": dataPoint.dur,</span></span>
<span id="cb36-435"><a href="#cb36-435" aria-hidden="true" tabindex="-1"></a><span class="in">                    "noweather": dataPoint.noweather,</span></span>
<span id="cb36-436"><a href="#cb36-436" aria-hidden="true" tabindex="-1"></a><span class="in">                    "st": dataPoint.st,</span></span>
<span id="cb36-437"><a href="#cb36-437" aria-hidden="true" tabindex="-1"></a><span class="in">                    "fn": dataPoint.fn,</span></span>
<span id="cb36-438"><a href="#cb36-438" aria-hidden="true" tabindex="-1"></a><span class="in">                    "t": dataPoint.t,</span></span>
<span id="cb36-439"><a href="#cb36-439" aria-hidden="true" tabindex="-1"></a><span class="in">                    "te": dataPoint.te</span></span>
<span id="cb36-440"><a href="#cb36-440" aria-hidden="true" tabindex="-1"></a><span class="in">                },</span></span>
<span id="cb36-441"><a href="#cb36-441" aria-hidden="true" tabindex="-1"></a><span class="in">                "geometry": { //here is where the new lat/lon vector is located</span></span>
<span id="cb36-442"><a href="#cb36-442" aria-hidden="true" tabindex="-1"></a><span class="in">                    "type": "Point",</span></span>
<span id="cb36-443"><a href="#cb36-443" aria-hidden="true" tabindex="-1"></a><span class="in">                    "coordinates": [dataPoint.Longitude, dataPoint.Latitude]</span></span>
<span id="cb36-444"><a href="#cb36-444" aria-hidden="true" tabindex="-1"></a><span class="in">                }</span></span>
<span id="cb36-445"><a href="#cb36-445" aria-hidden="true" tabindex="-1"></a><span class="in">            };</span></span>
<span id="cb36-446"><a href="#cb36-446" aria-hidden="true" tabindex="-1"></a><span class="in">            geojsonData.features.push(feature); //adds entire feature to the geojsonData object</span></span>
<span id="cb36-447"><a href="#cb36-447" aria-hidden="true" tabindex="-1"></a><span class="in">        });</span></span>
<span id="cb36-448"><a href="#cb36-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-449"><a href="#cb36-449" aria-hidden="true" tabindex="-1"></a><span class="in">   // Create unique icon (x for road closures)</span></span>
<span id="cb36-450"><a href="#cb36-450" aria-hidden="true" tabindex="-1"></a><span class="in">var customIcon = L.divIcon({</span></span>
<span id="cb36-451"><a href="#cb36-451" aria-hidden="true" tabindex="-1"></a><span class="in">    className: 'material-symbols-outlined',</span></span>
<span id="cb36-452"><a href="#cb36-452" aria-hidden="true" tabindex="-1"></a><span class="in">    iconAnchor: [5, 5],</span></span>
<span id="cb36-453"><a href="#cb36-453" aria-hidden="true" tabindex="-1"></a><span class="in">    html: '&amp;#x2716;'</span></span>
<span id="cb36-454"><a href="#cb36-454" aria-hidden="true" tabindex="-1"></a><span class="in">});</span></span>
<span id="cb36-455"><a href="#cb36-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-456"><a href="#cb36-456" aria-hidden="true" tabindex="-1"></a><span class="in">// Create geojson layer from closure data</span></span>
<span id="cb36-457"><a href="#cb36-457" aria-hidden="true" tabindex="-1"></a><span class="in">var geojsonLayer = L.geoJson(geojsonData, {</span></span>
<span id="cb36-458"><a href="#cb36-458" aria-hidden="true" tabindex="-1"></a><span class="in">    pointToLayer: function (feature, latlng) {</span></span>
<span id="cb36-459"><a href="#cb36-459" aria-hidden="true" tabindex="-1"></a><span class="in">        // Create marker with custom icon</span></span>
<span id="cb36-460"><a href="#cb36-460" aria-hidden="true" tabindex="-1"></a><span class="in">        var marker = L.marker(latlng, { icon: customIcon });</span></span>
<span id="cb36-461"><a href="#cb36-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-462"><a href="#cb36-462" aria-hidden="true" tabindex="-1"></a><span class="in">        // Bind a popup to the marker</span></span>
<span id="cb36-463"><a href="#cb36-463" aria-hidden="true" tabindex="-1"></a><span class="in">        marker.bindPopup("&lt;b&gt;Road Name:&lt;/b&gt; " + feature.properties.RoadName + "&lt;br&gt;" +</span></span>
<span id="cb36-464"><a href="#cb36-464" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Direction:&lt;/b&gt; " + feature.properties.Direction + "&lt;br&gt;" +</span></span>
<span id="cb36-465"><a href="#cb36-465" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Start Time:&lt;/b&gt; " + new Date(feature.properties.st).toDateString() + "&lt;br&gt;" +</span></span>
<span id="cb36-466"><a href="#cb36-466" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;End Time:&lt;/b&gt; " + new Date(feature.properties.fn).toDateString() + "&lt;br&gt;" +</span></span>
<span id="cb36-467"><a href="#cb36-467" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Reason:&lt;/b&gt; " + feature.properties.Reason);</span></span>
<span id="cb36-468"><a href="#cb36-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-469"><a href="#cb36-469" aria-hidden="true" tabindex="-1"></a><span class="in">        return marker;</span></span>
<span id="cb36-470"><a href="#cb36-470" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb36-471"><a href="#cb36-471" aria-hidden="true" tabindex="-1"></a><span class="in">}).addTo(map2);</span></span>
<span id="cb36-472"><a href="#cb36-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-473"><a href="#cb36-473" aria-hidden="true" tabindex="-1"></a><span class="in">// Create slider function</span></span>
<span id="cb36-474"><a href="#cb36-474" aria-hidden="true" tabindex="-1"></a><span class="in">function moveSlider(value) {</span></span>
<span id="cb36-475"><a href="#cb36-475" aria-hidden="true" tabindex="-1"></a><span class="in">    // Define start and end dates</span></span>
<span id="cb36-476"><a href="#cb36-476" aria-hidden="true" tabindex="-1"></a><span class="in">    var startDate = new Date("2018-09-12T00:00:00Z");</span></span>
<span id="cb36-477"><a href="#cb36-477" aria-hidden="true" tabindex="-1"></a><span class="in">    var endDate = new Date("2018-09-29T23:59:59Z");</span></span>
<span id="cb36-478"><a href="#cb36-478" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-479"><a href="#cb36-479" aria-hidden="true" tabindex="-1"></a><span class="in">    // Calculate total duration in milliseconds</span></span>
<span id="cb36-480"><a href="#cb36-480" aria-hidden="true" tabindex="-1"></a><span class="in">    var totalDuration = endDate.getTime() - startDate.getTime();</span></span>
<span id="cb36-481"><a href="#cb36-481" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-482"><a href="#cb36-482" aria-hidden="true" tabindex="-1"></a><span class="in">    // Calculate the selected time based on the slider value, make it a proportion of 17</span></span>
<span id="cb36-483"><a href="#cb36-483" aria-hidden="true" tabindex="-1"></a><span class="in">    var selectedTime = new Date(startDate.getTime() + (totalDuration * value / 17));</span></span>
<span id="cb36-484"><a href="#cb36-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-485"><a href="#cb36-485" aria-hidden="true" tabindex="-1"></a><span class="in">    // Filter geojsonData based on selected time</span></span>
<span id="cb36-486"><a href="#cb36-486" aria-hidden="true" tabindex="-1"></a><span class="in">    var filteredData = geojsonData.features.filter(function (feature) {</span></span>
<span id="cb36-487"><a href="#cb36-487" aria-hidden="true" tabindex="-1"></a><span class="in">        var startTime = new Date(feature.properties.st).getTime();</span></span>
<span id="cb36-488"><a href="#cb36-488" aria-hidden="true" tabindex="-1"></a><span class="in">        var endTime = new Date(feature.properties.fn).getTime();</span></span>
<span id="cb36-489"><a href="#cb36-489" aria-hidden="true" tabindex="-1"></a><span class="in">        return selectedTime &gt;= startTime &amp;&amp; selectedTime &lt;= endTime;</span></span>
<span id="cb36-490"><a href="#cb36-490" aria-hidden="true" tabindex="-1"></a><span class="in">    });</span></span>
<span id="cb36-491"><a href="#cb36-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-492"><a href="#cb36-492" aria-hidden="true" tabindex="-1"></a><span class="in">    // Clear existing markers from geojsonLayer</span></span>
<span id="cb36-493"><a href="#cb36-493" aria-hidden="true" tabindex="-1"></a><span class="in">    geojsonLayer.clearLayers();</span></span>
<span id="cb36-494"><a href="#cb36-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-495"><a href="#cb36-495" aria-hidden="true" tabindex="-1"></a><span class="in">    // Add markers for filtered data to geojsonLayer</span></span>
<span id="cb36-496"><a href="#cb36-496" aria-hidden="true" tabindex="-1"></a><span class="in">    filteredData.forEach(function (feature) {</span></span>
<span id="cb36-497"><a href="#cb36-497" aria-hidden="true" tabindex="-1"></a><span class="in">        var marker = L.marker([feature.geometry.coordinates[1], feature.geometry.coordinates[0]], { icon: customIcon });</span></span>
<span id="cb36-498"><a href="#cb36-498" aria-hidden="true" tabindex="-1"></a><span class="in">        geojsonLayer.addLayer(marker);</span></span>
<span id="cb36-499"><a href="#cb36-499" aria-hidden="true" tabindex="-1"></a><span class="in">    });</span></span>
<span id="cb36-500"><a href="#cb36-500" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb36-501"><a href="#cb36-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-502"><a href="#cb36-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-503"><a href="#cb36-503" aria-hidden="true" tabindex="-1"></a><span class="in">//Start with empty map</span></span>
<span id="cb36-504"><a href="#cb36-504" aria-hidden="true" tabindex="-1"></a><span class="in">moveSlider(0)</span></span>
<span id="cb36-505"><a href="#cb36-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-506"><a href="#cb36-506" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/script&gt;</span></span>
<span id="cb36-507"><a href="#cb36-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-508"><a href="#cb36-508" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-509"><a href="#cb36-509" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/body&gt;</span></span>
<span id="cb36-510"><a href="#cb36-510" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/html&gt;</span></span>
<span id="cb36-511"><a href="#cb36-511" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-512"><a href="#cb36-512" aria-hidden="true" tabindex="-1"></a><span class="fu">## Create Heat Map</span></span>
<span id="cb36-513"><a href="#cb36-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-514"><a href="#cb36-514" aria-hidden="true" tabindex="-1"></a>The point layer is nice, but very crowded. I want to find another way to convey the scale of road closures. I create another map layer that visualizes point density: a heatmap.</span>
<span id="cb36-515"><a href="#cb36-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-516"><a href="#cb36-516" aria-hidden="true" tabindex="-1"></a>To create a heatmap, I used a leaflet heatmap plugin called Leaflet.heat. First, I add the style sheet and the source script to the html.</span>
<span id="cb36-517"><a href="#cb36-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-518"><a href="#cb36-518" aria-hidden="true" tabindex="-1"></a>Style Sheet</span>
<span id="cb36-519"><a href="#cb36-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-520"><a href="#cb36-520" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-521"><a href="#cb36-521" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>link rel<span class="op">=</span><span class="st">"stylesheet"</span> href<span class="op">=</span><span class="st">"https://unpkg.com/leaflet.heat/dist/leaflet.heat.css"</span> <span class="op">/&gt;</span></span>
<span id="cb36-522"><a href="#cb36-522" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-523"><a href="#cb36-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-524"><a href="#cb36-524" aria-hidden="true" tabindex="-1"></a>Source Script</span>
<span id="cb36-525"><a href="#cb36-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-526"><a href="#cb36-526" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-527"><a href="#cb36-527" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script src<span class="op">=</span><span class="st">"https://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"</span><span class="op">&gt;&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb36-528"><a href="#cb36-528" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-529"><a href="#cb36-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-530"><a href="#cb36-530" aria-hidden="true" tabindex="-1"></a>I created a second map layer for the heatmap. Because there are so many data points, this particular dataset makes the heatmap all one color. This can be adjusted by customizing the gradient, max and radius values. I edited the max and gradient values so that they reflected the full distribution of my data.</span>
<span id="cb36-531"><a href="#cb36-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-532"><a href="#cb36-532" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-533"><a href="#cb36-533" aria-hidden="true" tabindex="-1"></a>var heatLayer <span class="op">=</span> L<span class="op">.</span>heatLayer<span class="op">(</span>geojsonData<span class="op">.</span>features<span class="op">.</span>map<span class="op">(</span>function <span class="op">(</span>feature<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-534"><a href="#cb36-534" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">[</span>feature<span class="op">.</span>geometry<span class="op">.</span>coordinates<span class="op">[</span><span class="dv">1</span><span class="op">],</span> feature<span class="op">.</span>geometry<span class="op">.</span>coordinates<span class="op">[</span><span class="dv">0</span><span class="op">]];</span></span>
<span id="cb36-535"><a href="#cb36-535" aria-hidden="true" tabindex="-1"></a>        <span class="op">}),</span> <span class="op">{</span></span>
<span id="cb36-536"><a href="#cb36-536" aria-hidden="true" tabindex="-1"></a>            radius<span class="op">:</span> <span class="dv">25</span><span class="op">,</span></span>
<span id="cb36-537"><a href="#cb36-537" aria-hidden="true" tabindex="-1"></a>            blur<span class="op">:</span> <span class="dv">15</span><span class="op">,</span></span>
<span id="cb36-538"><a href="#cb36-538" aria-hidden="true" tabindex="-1"></a>            maxZoom<span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb36-539"><a href="#cb36-539" aria-hidden="true" tabindex="-1"></a>            max<span class="op">:</span> <span class="fl">1.8</span><span class="op">,</span></span>
<span id="cb36-540"><a href="#cb36-540" aria-hidden="true" tabindex="-1"></a>            gradient<span class="op">:</span> <span class="op">{</span></span>
<span id="cb36-541"><a href="#cb36-541" aria-hidden="true" tabindex="-1"></a>                <span class="dv">0</span><span class="er">.1</span><span class="op">:</span> <span class="ch">'b</span><span class="er">lue</span><span class="ch">'</span><span class="op">,</span></span>
<span id="cb36-542"><a href="#cb36-542" aria-hidden="true" tabindex="-1"></a>                <span class="dv">0</span><span class="er">.2</span><span class="op">:</span> <span class="ch">'c</span><span class="er">yan</span><span class="ch">'</span><span class="op">,</span></span>
<span id="cb36-543"><a href="#cb36-543" aria-hidden="true" tabindex="-1"></a>                <span class="dv">0</span><span class="er">.4</span><span class="op">:</span> <span class="ch">'l</span><span class="er">ime</span><span class="ch">'</span><span class="op">,</span></span>
<span id="cb36-544"><a href="#cb36-544" aria-hidden="true" tabindex="-1"></a>                <span class="dv">0</span><span class="er">.6</span><span class="op">:</span> <span class="ch">'y</span><span class="er">ellow</span><span class="ch">'</span><span class="op">,</span></span>
<span id="cb36-545"><a href="#cb36-545" aria-hidden="true" tabindex="-1"></a>                <span class="dv">0</span><span class="er">.9</span><span class="op">:</span> <span class="ch">'o</span><span class="er">range</span><span class="ch">'</span><span class="op">,</span></span>
<span id="cb36-546"><a href="#cb36-546" aria-hidden="true" tabindex="-1"></a>                <span class="fl">1.0</span><span class="op">:</span> <span class="ch">'r</span><span class="er">ed</span><span class="ch">'</span></span>
<span id="cb36-547"><a href="#cb36-547" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb36-548"><a href="#cb36-548" aria-hidden="true" tabindex="-1"></a>        <span class="op">}).</span>addTo<span class="op">(</span>map<span class="op">);</span></span>
<span id="cb36-549"><a href="#cb36-549" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-550"><a href="#cb36-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-551"><a href="#cb36-551" aria-hidden="true" tabindex="-1"></a>Then, with the help of ChatGPT, I added these lines of code to the bottom of the moveSlider function to incorporate the heat map layer, so the heatmap layer would be synchronized with the point layer.</span>
<span id="cb36-552"><a href="#cb36-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-553"><a href="#cb36-553" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-554"><a href="#cb36-554" aria-hidden="true" tabindex="-1"></a><span class="co">//Create variable to store filtered data points for heatlayer</span></span>
<span id="cb36-555"><a href="#cb36-555" aria-hidden="true" tabindex="-1"></a>    var heatData <span class="op">=</span> filteredData<span class="op">.</span>map<span class="op">(</span>function <span class="op">(</span>feature<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-556"><a href="#cb36-556" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="op">[</span>feature<span class="op">.</span>geometry<span class="op">.</span>coordinates<span class="op">[</span><span class="dv">1</span><span class="op">],</span> feature<span class="op">.</span>geometry<span class="op">.</span>coordinates<span class="op">[</span><span class="dv">0</span><span class="op">]];</span></span>
<span id="cb36-557"><a href="#cb36-557" aria-hidden="true" tabindex="-1"></a>            <span class="op">});</span></span>
<span id="cb36-558"><a href="#cb36-558" aria-hidden="true" tabindex="-1"></a>            <span class="co">//direct heatlayer command to pull from heatData</span></span>
<span id="cb36-559"><a href="#cb36-559" aria-hidden="true" tabindex="-1"></a>            heatLayer<span class="op">.</span>setLatLngs<span class="op">(</span>heatData<span class="op">);</span></span>
<span id="cb36-560"><a href="#cb36-560" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-561"><a href="#cb36-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-562"><a href="#cb36-562" aria-hidden="true" tabindex="-1"></a>Here is a photo of what we're working with.</span>
<span id="cb36-563"><a href="#cb36-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-564"><a href="#cb36-564" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/heat.pt.png)</span></span>
<span id="cb36-565"><a href="#cb36-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-566"><a href="#cb36-566" aria-hidden="true" tabindex="-1"></a><span class="fu">## Customization and Aesthetics</span></span>
<span id="cb36-567"><a href="#cb36-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-568"><a href="#cb36-568" aria-hidden="true" tabindex="-1"></a>This is a functional map. But I want to add some customizable features for the user, and add some information to let the reader know what I’m visualizing. The heat layer and point layer on top of one another make the visualization muddled.</span>
<span id="cb36-569"><a href="#cb36-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-570"><a href="#cb36-570" aria-hidden="true" tabindex="-1"></a>Next, I created added layer switching controls for both layers. I defined the two layers, added the baselayer control object to the map, and added both layers to the map. Now the user can decide to look at the point or heat layer. </span>
<span id="cb36-571"><a href="#cb36-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-572"><a href="#cb36-572" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-573"><a href="#cb36-573" aria-hidden="true" tabindex="-1"></a><span class="co">//Add layer control to toggle back and forth between layers</span></span>
<span id="cb36-574"><a href="#cb36-574" aria-hidden="true" tabindex="-1"></a>        var baseLayers <span class="op">=</span> <span class="op">{</span></span>
<span id="cb36-575"><a href="#cb36-575" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Heatmap"</span><span class="op">:</span> heatLayer<span class="op">,</span></span>
<span id="cb36-576"><a href="#cb36-576" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Points"</span><span class="op">:</span> geojsonLayer</span>
<span id="cb36-577"><a href="#cb36-577" aria-hidden="true" tabindex="-1"></a>        <span class="op">};</span></span>
<span id="cb36-578"><a href="#cb36-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-579"><a href="#cb36-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-580"><a href="#cb36-580" aria-hidden="true" tabindex="-1"></a>        L<span class="op">.</span>control<span class="op">.</span>layers<span class="op">(</span>null<span class="op">,</span> baseLayers<span class="op">).</span>addTo<span class="op">(</span>map<span class="op">);</span></span>
<span id="cb36-581"><a href="#cb36-581" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb36-582"><a href="#cb36-582" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span>addLayer<span class="op">(</span>heatLayer<span class="op">);</span></span>
<span id="cb36-583"><a href="#cb36-583" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span>addLayer<span class="op">(</span>geojsonLayer<span class="op">);</span></span>
<span id="cb36-584"><a href="#cb36-584" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-585"><a href="#cb36-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-586"><a href="#cb36-586" aria-hidden="true" tabindex="-1"></a>For the search address feature, I used the geocoder plugin from leaflet called Leaflet Control Geocoder. You know the drill. Insert the plugin’s style sheet and source script.</span>
<span id="cb36-587"><a href="#cb36-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-588"><a href="#cb36-588" aria-hidden="true" tabindex="-1"></a>Style Sheet</span>
<span id="cb36-589"><a href="#cb36-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-590"><a href="#cb36-590" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-591"><a href="#cb36-591" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>link rel<span class="op">=</span><span class="st">"stylesheet"</span> href<span class="op">=</span><span class="st">"https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"</span><span class="op">&gt;</span></span>
<span id="cb36-592"><a href="#cb36-592" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-593"><a href="#cb36-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-594"><a href="#cb36-594" aria-hidden="true" tabindex="-1"></a>Source Script</span>
<span id="cb36-595"><a href="#cb36-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-596"><a href="#cb36-596" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-597"><a href="#cb36-597" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script src<span class="op">=</span><span class="st">"https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"</span><span class="op">&gt;&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb36-598"><a href="#cb36-598" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-599"><a href="#cb36-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-600"><a href="#cb36-600" aria-hidden="true" tabindex="-1"></a>I then customized the code to have a search icon and the words “Search Location” in the text box once the icon has been clicked.</span>
<span id="cb36-601"><a href="#cb36-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-602"><a href="#cb36-602" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-603"><a href="#cb36-603" aria-hidden="true" tabindex="-1"></a><span class="co">//create search location icon</span></span>
<span id="cb36-604"><a href="#cb36-604" aria-hidden="true" tabindex="-1"></a>        var geocoder <span class="op">=</span> L<span class="op">.</span>Control<span class="op">.</span>geocoder<span class="op">({</span></span>
<span id="cb36-605"><a href="#cb36-605" aria-hidden="true" tabindex="-1"></a>            geocoder<span class="op">:</span> L<span class="op">.</span>Control<span class="op">.</span>Geocoder<span class="op">.</span>nominatim<span class="op">(),</span></span>
<span id="cb36-606"><a href="#cb36-606" aria-hidden="true" tabindex="-1"></a>            defaultMarkGeocode<span class="op">:</span> false<span class="op">,</span></span>
<span id="cb36-607"><a href="#cb36-607" aria-hidden="true" tabindex="-1"></a>            placeholder<span class="op">:</span> <span class="st">"Search Location"</span><span class="op">,</span></span>
<span id="cb36-608"><a href="#cb36-608" aria-hidden="true" tabindex="-1"></a>            collapsed<span class="op">:</span> true<span class="op">,</span></span>
<span id="cb36-609"><a href="#cb36-609" aria-hidden="true" tabindex="-1"></a>            query<span class="op">:</span> <span class="st">""</span></span>
<span id="cb36-610"><a href="#cb36-610" aria-hidden="true" tabindex="-1"></a>        <span class="op">}).</span>on<span class="op">(</span><span class="ch">'m</span><span class="er">arkgeocode</span><span class="ch">'</span><span class="op">,</span> function <span class="op">(</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-611"><a href="#cb36-611" aria-hidden="true" tabindex="-1"></a>            var latlng <span class="op">=</span> e<span class="op">.</span>geocode<span class="op">.</span>center<span class="op">;</span></span>
<span id="cb36-612"><a href="#cb36-612" aria-hidden="true" tabindex="-1"></a>            map<span class="op">.</span>setView<span class="op">(</span>latlng<span class="op">,</span> map<span class="op">.</span>getZoom<span class="op">());</span></span>
<span id="cb36-613"><a href="#cb36-613" aria-hidden="true" tabindex="-1"></a>            map<span class="op">.</span>fitBounds<span class="op">(</span>e<span class="op">.</span>geocode<span class="op">.</span>bbox<span class="op">);</span></span>
<span id="cb36-614"><a href="#cb36-614" aria-hidden="true" tabindex="-1"></a>        <span class="op">}).</span>addTo<span class="op">(</span>map<span class="op">);</span></span>
<span id="cb36-615"><a href="#cb36-615" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-616"><a href="#cb36-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-617"><a href="#cb36-617" aria-hidden="true" tabindex="-1"></a>Layer Control and Geocoder appear in the top right corner of the map. </span>
<span id="cb36-618"><a href="#cb36-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-619"><a href="#cb36-619" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/layer.geocoder.png)</span></span>
<span id="cb36-620"><a href="#cb36-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-621"><a href="#cb36-621" aria-hidden="true" tabindex="-1"></a>I add a title and a date to the map. I use <span class="in">`&lt;span&gt;&lt;/span&gt;`</span> for the date, because it will have dynamic content. I want to synchronize the date to the movement of the slider.</span>
<span id="cb36-622"><a href="#cb36-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-623"><a href="#cb36-623" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-624"><a href="#cb36-624" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>h1<span class="op">&gt;</span>NC Road Closures During Hurricane Florence<span class="op">&lt;/</span>h1<span class="op">&gt;</span></span>
<span id="cb36-625"><a href="#cb36-625" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>h2<span class="op">&gt;</span>Date<span class="op">:</span> <span class="op">&lt;</span>span id<span class="op">=</span><span class="st">"dateDisplay"</span><span class="op">&gt;&lt;/</span>span<span class="op">&gt;&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb36-626"><a href="#cb36-626" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-627"><a href="#cb36-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-628"><a href="#cb36-628" aria-hidden="true" tabindex="-1"></a>Next, I create a function to update the date based on the slider value. I create a variable that connects the function to the h2 element above using the getElementById command. Then I change the date format so it returns to readable text.</span>
<span id="cb36-629"><a href="#cb36-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-630"><a href="#cb36-630" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-631"><a href="#cb36-631" aria-hidden="true" tabindex="-1"></a>function updateDateDisplay<span class="op">(</span>date<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-632"><a href="#cb36-632" aria-hidden="true" tabindex="-1"></a>            <span class="co">//create var that updates date display element at top of page</span></span>
<span id="cb36-633"><a href="#cb36-633" aria-hidden="true" tabindex="-1"></a>            var dateDisplay <span class="op">=</span> document<span class="op">.</span>getElementById<span class="op">(</span><span class="ch">'d</span><span class="er">ateDisplay</span><span class="ch">'</span><span class="op">);</span></span>
<span id="cb36-634"><a href="#cb36-634" aria-hidden="true" tabindex="-1"></a>            <span class="co">//Transform date into readable text</span></span>
<span id="cb36-635"><a href="#cb36-635" aria-hidden="true" tabindex="-1"></a>            dateDisplay<span class="op">.</span>textContent <span class="op">=</span> date<span class="op">.</span>toDateString<span class="op">();</span></span>
<span id="cb36-636"><a href="#cb36-636" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb36-637"><a href="#cb36-637" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-638"><a href="#cb36-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-639"><a href="#cb36-639" aria-hidden="true" tabindex="-1"></a>But how does the function know which date to choose? It relies on the slider value, which is also the earlier variable I created, selectedTime. *Within* the moveSlider function, I apply the updateDateDisplay function to the selectedTime. Now it will update each time the slider moves.</span>
<span id="cb36-640"><a href="#cb36-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-641"><a href="#cb36-641" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .js}</span></span>
<span id="cb36-642"><a href="#cb36-642" aria-hidden="true" tabindex="-1"></a>updateDateDisplay<span class="op">(</span>selectedTime<span class="op">);</span></span>
<span id="cb36-643"><a href="#cb36-643" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-644"><a href="#cb36-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-645"><a href="#cb36-645" aria-hidden="true" tabindex="-1"></a>Now I’ll add some more aesthetic features to the website itself. Using the w3school’s Round Slider CSS code, I customized my slider design.</span>
<span id="cb36-646"><a href="#cb36-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-647"><a href="#cb36-647" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .css}</span></span>
<span id="cb36-648"><a href="#cb36-648" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">dateSlider {</span></span>
<span id="cb36-649"><a href="#cb36-649" aria-hidden="true" tabindex="-1"></a>            <span class="op">-</span>webkit<span class="op">-</span>appearance<span class="op">:</span> none<span class="op">;</span></span>
<span id="cb36-650"><a href="#cb36-650" aria-hidden="true" tabindex="-1"></a>            width<span class="op">:</span> <span class="dv">100</span><span class="op">%;</span></span>
<span id="cb36-651"><a href="#cb36-651" aria-hidden="true" tabindex="-1"></a>            height<span class="op">:</span> <span class="dv">15</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-652"><a href="#cb36-652" aria-hidden="true" tabindex="-1"></a>            border<span class="op">-</span>radius<span class="op">:</span> <span class="dv">5</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-653"><a href="#cb36-653" aria-hidden="true" tabindex="-1"></a>            background<span class="op">:</span> #d3d3d3<span class="op">;</span></span>
<span id="cb36-654"><a href="#cb36-654" aria-hidden="true" tabindex="-1"></a>            outline<span class="op">:</span> none<span class="op">;</span></span>
<span id="cb36-655"><a href="#cb36-655" aria-hidden="true" tabindex="-1"></a>            opacity<span class="op">:</span> <span class="dv">0</span><span class="er">.7</span><span class="op">;</span></span>
<span id="cb36-656"><a href="#cb36-656" aria-hidden="true" tabindex="-1"></a>            <span class="op">-</span>webkit<span class="op">-</span>transition<span class="op">:</span> <span class="fl">.2</span><span class="er">s</span><span class="op">;</span></span>
<span id="cb36-657"><a href="#cb36-657" aria-hidden="true" tabindex="-1"></a>            transition<span class="op">:</span> opacity <span class="fl">.2</span><span class="er">s</span><span class="op">;</span></span>
<span id="cb36-658"><a href="#cb36-658" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb36-659"><a href="#cb36-659" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb36-660"><a href="#cb36-660" aria-hidden="true" tabindex="-1"></a>        <span class="pp">#</span><span class="er">dateSlider::-webkit-slider-thumb {</span></span>
<span id="cb36-661"><a href="#cb36-661" aria-hidden="true" tabindex="-1"></a>            <span class="op">-</span>webkit<span class="op">-</span>appearance<span class="op">:</span> none<span class="op">;</span></span>
<span id="cb36-662"><a href="#cb36-662" aria-hidden="true" tabindex="-1"></a>            appearance<span class="op">:</span> none<span class="op">;</span></span>
<span id="cb36-663"><a href="#cb36-663" aria-hidden="true" tabindex="-1"></a>            width<span class="op">:</span> <span class="dv">25</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-664"><a href="#cb36-664" aria-hidden="true" tabindex="-1"></a>            height<span class="op">:</span> <span class="dv">25</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-665"><a href="#cb36-665" aria-hidden="true" tabindex="-1"></a>            border<span class="op">-</span>radius<span class="op">:</span> <span class="dv">50</span><span class="op">%;</span></span>
<span id="cb36-666"><a href="#cb36-666" aria-hidden="true" tabindex="-1"></a>            background<span class="op">:</span> #<span class="bn">04</span><span class="er">AA6D</span><span class="op">;</span></span>
<span id="cb36-667"><a href="#cb36-667" aria-hidden="true" tabindex="-1"></a>            cursor<span class="op">:</span> pointer<span class="op">;</span></span>
<span id="cb36-668"><a href="#cb36-668" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb36-669"><a href="#cb36-669" aria-hidden="true" tabindex="-1"></a>        <span class="pp">#</span><span class="er">dateSlider::-moz-range-thumb {</span></span>
<span id="cb36-670"><a href="#cb36-670" aria-hidden="true" tabindex="-1"></a>            width<span class="op">:</span> <span class="dv">25</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-671"><a href="#cb36-671" aria-hidden="true" tabindex="-1"></a>            height<span class="op">:</span> <span class="dv">25</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-672"><a href="#cb36-672" aria-hidden="true" tabindex="-1"></a>            border<span class="op">-</span>radius<span class="op">:</span> <span class="dv">50</span><span class="op">%;</span></span>
<span id="cb36-673"><a href="#cb36-673" aria-hidden="true" tabindex="-1"></a>            background<span class="op">:</span> #<span class="bn">04</span><span class="er">AA6D</span><span class="op">;</span></span>
<span id="cb36-674"><a href="#cb36-674" aria-hidden="true" tabindex="-1"></a>            cursor<span class="op">:</span> pointer<span class="op">;</span></span>
<span id="cb36-675"><a href="#cb36-675" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-676"><a href="#cb36-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-677"><a href="#cb36-677" aria-hidden="true" tabindex="-1"></a>I want the map to take up most of the page, and I want the slider and text to move to the lefthand side of the page. I also want to leave room for some background text on Hurricane Florence. I do this by creating a div element called sidebar and placing my title, date, and slider with it.</span>
<span id="cb36-678"><a href="#cb36-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-679"><a href="#cb36-679" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-680"><a href="#cb36-680" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>h1<span class="op">&gt;</span>NC Road Closures During Hurricane Florence<span class="op">&lt;/</span>h1<span class="op">&gt;</span></span>
<span id="cb36-681"><a href="#cb36-681" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Date<span class="op">:</span> <span class="op">&lt;</span>span id<span class="op">=</span><span class="st">"dateDisplay"</span><span class="op">&gt;&lt;/</span>span<span class="op">&gt;&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb36-682"><a href="#cb36-682" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;!--</span> Create slider <span class="op">--&gt;</span></span>
<span id="cb36-683"><a href="#cb36-683" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">"dateSlider"</span> type<span class="op">=</span><span class="st">"range"</span> value<span class="op">=</span><span class="st">"0"</span> name<span class="op">=</span><span class="st">"Day"</span> min<span class="op">=</span><span class="st">"0"</span> max<span class="op">=</span><span class="st">"17"</span> oninput<span class="op">=</span><span class="st">"moveSlider(this.value)"</span><span class="op">&gt;</span></span>
<span id="cb36-684"><a href="#cb36-684" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb36-685"><a href="#cb36-685" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-686"><a href="#cb36-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-687"><a href="#cb36-687" aria-hidden="true" tabindex="-1"></a>Then I create another div that will encompass both the sidebar and the map called map container.</span>
<span id="cb36-688"><a href="#cb36-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-689"><a href="#cb36-689" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-690"><a href="#cb36-690" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>div id<span class="op">=</span><span class="st">"map-container"</span><span class="op">&gt;&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb36-691"><a href="#cb36-691" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">"sidebar"</span><span class="op">&gt;</span></span>
<span id="cb36-692"><a href="#cb36-692" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>h1<span class="op">&gt;</span>NC Road Closures During Hurricane Florence<span class="op">&lt;/</span>h1<span class="op">&gt;</span></span>
<span id="cb36-693"><a href="#cb36-693" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>h2<span class="op">&gt;</span>Date<span class="op">:</span> <span class="op">&lt;</span>span id<span class="op">=</span><span class="st">"dateDisplay"</span><span class="op">&gt;&lt;/</span>span<span class="op">&gt;&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb36-694"><a href="#cb36-694" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;!--</span> Create slider <span class="op">--&gt;</span></span>
<span id="cb36-695"><a href="#cb36-695" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">"dateSlider"</span> type<span class="op">=</span><span class="st">"range"</span> value<span class="op">=</span><span class="st">"0"</span> name<span class="op">=</span><span class="st">"Day"</span> min<span class="op">=</span><span class="st">"0"</span> max<span class="op">=</span><span class="st">"17"</span> oninput<span class="op">=</span><span class="st">"moveSlider(this.value)"</span><span class="op">&gt;</span></span>
<span id="cb36-696"><a href="#cb36-696" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb36-697"><a href="#cb36-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-698"><a href="#cb36-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-699"><a href="#cb36-699" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;!--</span> Create Map Div and id  <span class="op">--&gt;</span></span>
<span id="cb36-700"><a href="#cb36-700" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">"map"</span><span class="op">&gt;&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb36-701"><a href="#cb36-701" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb36-702"><a href="#cb36-702" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-703"><a href="#cb36-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-704"><a href="#cb36-704" aria-hidden="true" tabindex="-1"></a>I add this css code. I set the sidebar and map to have positions relative to each other. Using 100vw and 100vh, I direct the map and sidebar to take up the entire screen (100% of viewport height and width). The display code places the sidebar on the left side of the screen. The CSS for the map div sets the maps width to take up the remaining space after the sidebar's width is taken into account (flex: 1;), and sets its height to 100% of the map-container. Then I set the width and height of the sidebar, the background color, and margins. Notice how the id’s I assigned earlier are used for each object.</span>
<span id="cb36-705"><a href="#cb36-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-706"><a href="#cb36-706" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .css}</span></span>
<span id="cb36-707"><a href="#cb36-707" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">map-container {</span></span>
<span id="cb36-708"><a href="#cb36-708" aria-hidden="true" tabindex="-1"></a>        position<span class="op">:</span> relative<span class="op">;</span></span>
<span id="cb36-709"><a href="#cb36-709" aria-hidden="true" tabindex="-1"></a>        width<span class="op">:</span> <span class="dv">100</span><span class="er">vw</span><span class="op">;</span></span>
<span id="cb36-710"><a href="#cb36-710" aria-hidden="true" tabindex="-1"></a>        height<span class="op">:</span> <span class="dv">100</span><span class="er">vh</span><span class="op">;</span></span>
<span id="cb36-711"><a href="#cb36-711" aria-hidden="true" tabindex="-1"></a>        display<span class="op">:</span> flex<span class="op">;</span></span>
<span id="cb36-712"><a href="#cb36-712" aria-hidden="true" tabindex="-1"></a>        flex<span class="op">-</span>direction<span class="op">:</span> row<span class="op">;</span></span>
<span id="cb36-713"><a href="#cb36-713" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb36-714"><a href="#cb36-714" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#</span><span class="er">map {</span></span>
<span id="cb36-715"><a href="#cb36-715" aria-hidden="true" tabindex="-1"></a>        flex<span class="op">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb36-716"><a href="#cb36-716" aria-hidden="true" tabindex="-1"></a>        height<span class="op">:</span> <span class="dv">100</span><span class="op">%;</span></span>
<span id="cb36-717"><a href="#cb36-717" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb36-718"><a href="#cb36-718" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#</span><span class="er">sidebar {</span></span>
<span id="cb36-719"><a href="#cb36-719" aria-hidden="true" tabindex="-1"></a>            width<span class="op">:</span> <span class="dv">350</span><span class="er">px</span><span class="op">;</span> <span class="co">/* Set the width of the sidebar*/</span></span>
<span id="cb36-720"><a href="#cb36-720" aria-hidden="true" tabindex="-1"></a>            height<span class="op">:</span> <span class="dv">100</span><span class="op">%;</span> <span class="co">/* Set the height of the sidebar to 100% of its container's height */</span></span>
<span id="cb36-721"><a href="#cb36-721" aria-hidden="true" tabindex="-1"></a>            background<span class="op">-</span>color<span class="op">:</span> #f9f9f9<span class="op">;</span> <span class="co">/* Set the background color of the sidebar to gray */</span></span>
<span id="cb36-722"><a href="#cb36-722" aria-hidden="true" tabindex="-1"></a>            padding<span class="op">:</span> <span class="dv">20</span><span class="er">px</span><span class="op">;</span> <span class="co">/* Add margins inside the sidebar */</span></span>
<span id="cb36-723"><a href="#cb36-723" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb36-724"><a href="#cb36-724" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-725"><a href="#cb36-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-726"><a href="#cb36-726" aria-hidden="true" tabindex="-1"></a>Lastly, I add an h3 element containing the background text about Hurricane Florence within the sidebar div. To hyperlink a word, I use <span class="in">`&lt;a href&gt;&lt;/&gt;`</span>. <span class="in">`target=”blank”`</span> opens the link in a new tab when it is clicked.</span>
<span id="cb36-727"><a href="#cb36-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-728"><a href="#cb36-728" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .html}</span></span>
<span id="cb36-729"><a href="#cb36-729" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>div id<span class="op">=</span><span class="st">"sidebar"</span><span class="op">&gt;</span></span>
<span id="cb36-730"><a href="#cb36-730" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>h1<span class="op">&gt;</span>NC Road Closures During Hurricane Florence<span class="op">&lt;/</span>h1<span class="op">&gt;</span></span>
<span id="cb36-731"><a href="#cb36-731" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>h2<span class="op">&gt;</span>Date<span class="op">:</span> <span class="op">&lt;</span>span id<span class="op">=</span><span class="st">"dateDisplay"</span><span class="op">&gt;&lt;/</span>span<span class="op">&gt;&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb36-732"><a href="#cb36-732" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">"dateSlider"</span> type<span class="op">=</span><span class="st">"range"</span> value<span class="op">=</span><span class="st">"0"</span> name<span class="op">=</span><span class="st">"Day"</span> min<span class="op">=</span><span class="st">"0"</span> max<span class="op">=</span><span class="st">"17"</span> oninput<span class="op">=</span><span class="st">"moveSlider(this.value)"</span><span class="op">&gt;</span></span>
<span id="cb36-733"><a href="#cb36-733" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>h3<span class="op">&gt;</span>Hurricane Florence made landfall at Wrightsville Beach<span class="op">,</span> North Carolina<span class="op">,</span> on September <span class="dv">14</span><span class="op">,</span> <span class="fl">2018.</span> Florence was among the most expensive floods in US history<span class="op">,</span> costing the state of North Carolina alone an estimated $<span class="dv">22</span> billion<span class="op">.</span> Over <span class="dv">140</span><span class="op">,</span><span class="bn">000</span> North Carolinians registered <span class="cf">for</span> federal disaster assistance<span class="op">,</span> and nearly <span class="dv">75</span><span class="op">,</span><span class="bn">000</span> structures flooded<span class="op">.</span> The record<span class="op">-</span>breaking precipitation and inundation severely compromised roads<span class="op">.</span> In the southeastern part of the state<span class="op">,</span> nearly every major road and highway flooded<span class="op">,</span> with many remaining impassable <span class="cf">for</span> several days after Florence had dissipated<span class="op">.&lt;</span>br<span class="op">&gt;&lt;/</span>h3<span class="op">&gt;</span></span>
<span id="cb36-734"><a href="#cb36-734" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>a href<span class="op">=</span><span class="st">"https://www.nhc.noaa.gov/data/tcr/AL062018_Florence.pdf"</span> target<span class="op">=</span><span class="st">"_blank"</span><span class="op">&gt;</span>Source<span class="op">&lt;/</span>a<span class="op">&gt;</span></span>
<span id="cb36-735"><a href="#cb36-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-736"><a href="#cb36-736" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb36-737"><a href="#cb36-737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-738"><a href="#cb36-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-739"><a href="#cb36-739" aria-hidden="true" tabindex="-1"></a>I add some CSS to increase font size, unbold it, and add space between the words and the slider.</span>
<span id="cb36-740"><a href="#cb36-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-741"><a href="#cb36-741" aria-hidden="true" tabindex="-1"></a><span class="in">``` {.code .css}</span></span>
<span id="cb36-742"><a href="#cb36-742" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">sidebar h3 {</span></span>
<span id="cb36-743"><a href="#cb36-743" aria-hidden="true" tabindex="-1"></a>            font<span class="op">-</span>size<span class="op">:</span> <span class="dv">18</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-744"><a href="#cb36-744" aria-hidden="true" tabindex="-1"></a>            font<span class="op">-</span>weight<span class="op">:</span> normal<span class="op">;</span></span>
<span id="cb36-745"><a href="#cb36-745" aria-hidden="true" tabindex="-1"></a>            margin<span class="op">-</span>top<span class="op">:</span> <span class="dv">30</span><span class="er">px</span><span class="op">;</span></span>
<span id="cb36-746"><a href="#cb36-746" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb36-747"><a href="#cb36-747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb36-748"><a href="#cb36-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-749"><a href="#cb36-749" aria-hidden="true" tabindex="-1"></a>And that’s my map!</span>
<span id="cb36-750"><a href="#cb36-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-751"><a href="#cb36-751" aria-hidden="true" tabindex="-1"></a><span class="fu">### Final Iteration</span></span>
<span id="cb36-752"><a href="#cb36-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-753"><a href="#cb36-753" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb36-754"><a href="#cb36-754" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!DOCTYPE html&gt;</span></span>
<span id="cb36-755"><a href="#cb36-755" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;html lang="en"&gt;</span></span>
<span id="cb36-756"><a href="#cb36-756" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;head&gt;</span></span>
<span id="cb36-757"><a href="#cb36-757" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;meta charset="UTF-8"&gt;</span></span>
<span id="cb36-758"><a href="#cb36-758" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></span>
<span id="cb36-759"><a href="#cb36-759" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;title&gt;Document&lt;/title&gt;</span></span>
<span id="cb36-760"><a href="#cb36-760" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"</span></span>
<span id="cb36-761"><a href="#cb36-761" aria-hidden="true" tabindex="-1"></a><span class="in">   integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="</span></span>
<span id="cb36-762"><a href="#cb36-762" aria-hidden="true" tabindex="-1"></a><span class="in">   crossorigin=""/&gt;</span></span>
<span id="cb36-763"><a href="#cb36-763" aria-hidden="true" tabindex="-1"></a><span class="in">   &lt;link rel="stylesheet" href="https://unpkg.com/leaflet.heat/dist/leaflet.heat.css" /&gt;</span></span>
<span id="cb36-764"><a href="#cb36-764" aria-hidden="true" tabindex="-1"></a><span class="in">   &lt;link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"&gt;</span></span>
<span id="cb36-765"><a href="#cb36-765" aria-hidden="true" tabindex="-1"></a><span class="in">   &lt;style&gt;</span></span>
<span id="cb36-766"><a href="#cb36-766" aria-hidden="true" tabindex="-1"></a><span class="in">/* Set the body to use the full height of the page */</span></span>
<span id="cb36-767"><a href="#cb36-767" aria-hidden="true" tabindex="-1"></a><span class="in">body {</span></span>
<span id="cb36-768"><a href="#cb36-768" aria-hidden="true" tabindex="-1"></a><span class="in">    font-family: Arial, sans-serif;</span></span>
<span id="cb36-769"><a href="#cb36-769" aria-hidden="true" tabindex="-1"></a><span class="in">    margin: 0;</span></span>
<span id="cb36-770"><a href="#cb36-770" aria-hidden="true" tabindex="-1"></a><span class="in">    padding: 0;</span></span>
<span id="cb36-771"><a href="#cb36-771" aria-hidden="true" tabindex="-1"></a><span class="in">    height: 100vh;</span></span>
<span id="cb36-772"><a href="#cb36-772" aria-hidden="true" tabindex="-1"></a><span class="in">    display: flex;</span></span>
<span id="cb36-773"><a href="#cb36-773" aria-hidden="true" tabindex="-1"></a><span class="in">    flex-direction: column;</span></span>
<span id="cb36-774"><a href="#cb36-774" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb36-775"><a href="#cb36-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-776"><a href="#cb36-776" aria-hidden="true" tabindex="-1"></a><span class="in">/* Set the map container to take up the remaining space */</span></span>
<span id="cb36-777"><a href="#cb36-777" aria-hidden="true" tabindex="-1"></a><span class="in">#map-container3 {</span></span>
<span id="cb36-778"><a href="#cb36-778" aria-hidden="true" tabindex="-1"></a><span class="in">    height: 600px; /* or any other desired height */</span></span>
<span id="cb36-779"><a href="#cb36-779" aria-hidden="true" tabindex="-1"></a><span class="in">    width: 1000px; /* or any other desired width */</span></span>
<span id="cb36-780"><a href="#cb36-780" aria-hidden="true" tabindex="-1"></a><span class="in">    display: flex;</span></span>
<span id="cb36-781"><a href="#cb36-781" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb36-782"><a href="#cb36-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-783"><a href="#cb36-783" aria-hidden="true" tabindex="-1"></a><span class="in">/* Set the sidebar to have a fixed width and be scrollable */</span></span>
<span id="cb36-784"><a href="#cb36-784" aria-hidden="true" tabindex="-1"></a><span class="in">#sidebar3 {</span></span>
<span id="cb36-785"><a href="#cb36-785" aria-hidden="true" tabindex="-1"></a><span class="in">    width: 275px;</span></span>
<span id="cb36-786"><a href="#cb36-786" aria-hidden="true" tabindex="-1"></a><span class="in">    overflow-y: auto;</span></span>
<span id="cb36-787"><a href="#cb36-787" aria-hidden="true" tabindex="-1"></a><span class="in">    padding: 20px;</span></span>
<span id="cb36-788"><a href="#cb36-788" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb36-789"><a href="#cb36-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-790"><a href="#cb36-790" aria-hidden="true" tabindex="-1"></a><span class="in">/* Set the map to take up the remaining space in the map container */</span></span>
<span id="cb36-791"><a href="#cb36-791" aria-hidden="true" tabindex="-1"></a><span class="in">#map3 {</span></span>
<span id="cb36-792"><a href="#cb36-792" aria-hidden="true" tabindex="-1"></a><span class="in">    flex: 1;</span></span>
<span id="cb36-793"><a href="#cb36-793" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb36-794"><a href="#cb36-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-795"><a href="#cb36-795" aria-hidden="true" tabindex="-1"></a><span class="in">    /* icon styles */</span></span>
<span id="cb36-796"><a href="#cb36-796" aria-hidden="true" tabindex="-1"></a><span class="in">    .material-symbols-outlined {</span></span>
<span id="cb36-797"><a href="#cb36-797" aria-hidden="true" tabindex="-1"></a><span class="in">            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;</span></span>
<span id="cb36-798"><a href="#cb36-798" aria-hidden="true" tabindex="-1"></a><span class="in">            display: inline-block;</span></span>
<span id="cb36-799"><a href="#cb36-799" aria-hidden="true" tabindex="-1"></a><span class="in">            color: rgb(220, 41, 41);</span></span>
<span id="cb36-800"><a href="#cb36-800" aria-hidden="true" tabindex="-1"></a><span class="in">            font-family: 'Material Icons';</span></span>
<span id="cb36-801"><a href="#cb36-801" aria-hidden="true" tabindex="-1"></a><span class="in">            font-size: 12px;</span></span>
<span id="cb36-802"><a href="#cb36-802" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb36-803"><a href="#cb36-803" aria-hidden="true" tabindex="-1"></a><span class="in">    #dateSlider3 {</span></span>
<span id="cb36-804"><a href="#cb36-804" aria-hidden="true" tabindex="-1"></a><span class="in">            -webkit-appearance: none;</span></span>
<span id="cb36-805"><a href="#cb36-805" aria-hidden="true" tabindex="-1"></a><span class="in">            width: 100%;</span></span>
<span id="cb36-806"><a href="#cb36-806" aria-hidden="true" tabindex="-1"></a><span class="in">            height: 15px;</span></span>
<span id="cb36-807"><a href="#cb36-807" aria-hidden="true" tabindex="-1"></a><span class="in">            border-radius: 5px;</span></span>
<span id="cb36-808"><a href="#cb36-808" aria-hidden="true" tabindex="-1"></a><span class="in">            background: #d3d3d3;</span></span>
<span id="cb36-809"><a href="#cb36-809" aria-hidden="true" tabindex="-1"></a><span class="in">            outline: none;</span></span>
<span id="cb36-810"><a href="#cb36-810" aria-hidden="true" tabindex="-1"></a><span class="in">            opacity: 0.7;</span></span>
<span id="cb36-811"><a href="#cb36-811" aria-hidden="true" tabindex="-1"></a><span class="in">            -webkit-transition: .2s;</span></span>
<span id="cb36-812"><a href="#cb36-812" aria-hidden="true" tabindex="-1"></a><span class="in">            transition: opacity .2s;</span></span>
<span id="cb36-813"><a href="#cb36-813" aria-hidden="true" tabindex="-1"></a><span class="in">            </span></span>
<span id="cb36-814"><a href="#cb36-814" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb36-815"><a href="#cb36-815" aria-hidden="true" tabindex="-1"></a><span class="in">        #dateSlider3::-webkit-slider-thumb {</span></span>
<span id="cb36-816"><a href="#cb36-816" aria-hidden="true" tabindex="-1"></a><span class="in">            -webkit-appearance: none;</span></span>
<span id="cb36-817"><a href="#cb36-817" aria-hidden="true" tabindex="-1"></a><span class="in">            appearance: none;</span></span>
<span id="cb36-818"><a href="#cb36-818" aria-hidden="true" tabindex="-1"></a><span class="in">            width: 25px;</span></span>
<span id="cb36-819"><a href="#cb36-819" aria-hidden="true" tabindex="-1"></a><span class="in">            height: 25px;</span></span>
<span id="cb36-820"><a href="#cb36-820" aria-hidden="true" tabindex="-1"></a><span class="in">            border-radius: 50%;</span></span>
<span id="cb36-821"><a href="#cb36-821" aria-hidden="true" tabindex="-1"></a><span class="in">            background: #04AA6D;</span></span>
<span id="cb36-822"><a href="#cb36-822" aria-hidden="true" tabindex="-1"></a><span class="in">            cursor: pointer;</span></span>
<span id="cb36-823"><a href="#cb36-823" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb36-824"><a href="#cb36-824" aria-hidden="true" tabindex="-1"></a><span class="in">        #dateSlider3::-moz-range-thumb {</span></span>
<span id="cb36-825"><a href="#cb36-825" aria-hidden="true" tabindex="-1"></a><span class="in">            width: 25px;</span></span>
<span id="cb36-826"><a href="#cb36-826" aria-hidden="true" tabindex="-1"></a><span class="in">            height: 25px;</span></span>
<span id="cb36-827"><a href="#cb36-827" aria-hidden="true" tabindex="-1"></a><span class="in">            border-radius: 50%;</span></span>
<span id="cb36-828"><a href="#cb36-828" aria-hidden="true" tabindex="-1"></a><span class="in">            background: #04AA6D;</span></span>
<span id="cb36-829"><a href="#cb36-829" aria-hidden="true" tabindex="-1"></a><span class="in">            cursor: pointer;</span></span>
<span id="cb36-830"><a href="#cb36-830" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb36-831"><a href="#cb36-831" aria-hidden="true" tabindex="-1"></a><span class="in">        #sidebar3 h1 {</span></span>
<span id="cb36-832"><a href="#cb36-832" aria-hidden="true" tabindex="-1"></a><span class="in">            font-size: 24px;</span></span>
<span id="cb36-833"><a href="#cb36-833" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb36-834"><a href="#cb36-834" aria-hidden="true" tabindex="-1"></a><span class="in">        #sidebar3 h2 {</span></span>
<span id="cb36-835"><a href="#cb36-835" aria-hidden="true" tabindex="-1"></a><span class="in">            font-size: 24px;</span></span>
<span id="cb36-836"><a href="#cb36-836" aria-hidden="true" tabindex="-1"></a><span class="in">            margin-top: 10px</span></span>
<span id="cb36-837"><a href="#cb36-837" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb36-838"><a href="#cb36-838" aria-hidden="true" tabindex="-1"></a><span class="in">        #sidebar3 h3 {</span></span>
<span id="cb36-839"><a href="#cb36-839" aria-hidden="true" tabindex="-1"></a><span class="in">            font-size: 18px;</span></span>
<span id="cb36-840"><a href="#cb36-840" aria-hidden="true" tabindex="-1"></a><span class="in">            font-weight: normal;</span></span>
<span id="cb36-841"><a href="#cb36-841" aria-hidden="true" tabindex="-1"></a><span class="in">            margin-top: 30px;</span></span>
<span id="cb36-842"><a href="#cb36-842" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb36-843"><a href="#cb36-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-844"><a href="#cb36-844" aria-hidden="true" tabindex="-1"></a><span class="in">   &lt;/style&gt;</span></span>
<span id="cb36-845"><a href="#cb36-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-846"><a href="#cb36-846" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/head&gt;</span></span>
<span id="cb36-847"><a href="#cb36-847" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;body&gt;</span></span>
<span id="cb36-848"><a href="#cb36-848" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"</span></span>
<span id="cb36-849"><a href="#cb36-849" aria-hidden="true" tabindex="-1"></a><span class="in">    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="</span></span>
<span id="cb36-850"><a href="#cb36-850" aria-hidden="true" tabindex="-1"></a><span class="in">    crossorigin=""&gt;&lt;/script&gt;</span></span>
<span id="cb36-851"><a href="#cb36-851" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;script src="https://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"&gt;&lt;/script&gt;</span></span>
<span id="cb36-852"><a href="#cb36-852" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"&gt;&lt;/script&gt;</span></span>
<span id="cb36-853"><a href="#cb36-853" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;script src="closures.js"&gt;&lt;/script&gt;</span></span>
<span id="cb36-854"><a href="#cb36-854" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;!-- create container for sidebar and map --&gt;</span></span>
<span id="cb36-855"><a href="#cb36-855" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;div id="map-container3"&gt;</span></span>
<span id="cb36-856"><a href="#cb36-856" aria-hidden="true" tabindex="-1"></a><span class="in">        &lt;div id="sidebar3"&gt;</span></span>
<span id="cb36-857"><a href="#cb36-857" aria-hidden="true" tabindex="-1"></a><span class="in">            &lt;h1&gt;NC Road Closures During Hurricane Florence&lt;/h1&gt;</span></span>
<span id="cb36-858"><a href="#cb36-858" aria-hidden="true" tabindex="-1"></a><span class="in">            &lt;h2&gt;Date: &lt;span id="dateDisplay"&gt;&lt;/span&gt;&lt;/h2&gt;</span></span>
<span id="cb36-859"><a href="#cb36-859" aria-hidden="true" tabindex="-1"></a><span class="in">            &lt;input id="dateSlider3" type="range" value="0" name="Day" min="0" max="17" oninput="moveSlider(this.value)"&gt;</span></span>
<span id="cb36-860"><a href="#cb36-860" aria-hidden="true" tabindex="-1"></a><span class="in">            &lt;h3&gt;Hurricane Florence made landfall at Wrightsville Beach, North Carolina, on September 14, 2018. Florence was among the most expensive floods in US history, </span></span>
<span id="cb36-861"><a href="#cb36-861" aria-hidden="true" tabindex="-1"></a><span class="in">                costing the state of North Carolina alone an estimated $22 billion. Over 140,000 North Carolinians registered for federal disaster assistance, and nearly </span></span>
<span id="cb36-862"><a href="#cb36-862" aria-hidden="true" tabindex="-1"></a><span class="in">                75,000 structures flooded. The record-breaking precipitation and inundation severely compromised roads. In the southeastern part of the state, nearly every </span></span>
<span id="cb36-863"><a href="#cb36-863" aria-hidden="true" tabindex="-1"></a><span class="in">                major road and highway flooded, with many remaining impassable for several days after Florence had dissipated.&lt;br&gt;&lt;/h3&gt;</span></span>
<span id="cb36-864"><a href="#cb36-864" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;a href="https://www.nhc.noaa.gov/data/tcr/AL062018_Florence.pdf" target="_blank"&gt;Source&lt;/a&gt;</span></span>
<span id="cb36-865"><a href="#cb36-865" aria-hidden="true" tabindex="-1"></a><span class="in">        &lt;/div&gt;</span></span>
<span id="cb36-866"><a href="#cb36-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-867"><a href="#cb36-867" aria-hidden="true" tabindex="-1"></a><span class="in">        &lt;!-- Create Map Div and id  --&gt;</span></span>
<span id="cb36-868"><a href="#cb36-868" aria-hidden="true" tabindex="-1"></a><span class="in">        &lt;div id="map3"&gt;&lt;/div&gt;</span></span>
<span id="cb36-869"><a href="#cb36-869" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;/div&gt;</span></span>
<span id="cb36-870"><a href="#cb36-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-871"><a href="#cb36-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-872"><a href="#cb36-872" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;script&gt;</span></span>
<span id="cb36-873"><a href="#cb36-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-874"><a href="#cb36-874" aria-hidden="true" tabindex="-1"></a><span class="in">    //Create leaflet map centered on North Carolina</span></span>
<span id="cb36-875"><a href="#cb36-875" aria-hidden="true" tabindex="-1"></a><span class="in">    var map3 = L.map('map3').setView([35, -80], 7);</span></span>
<span id="cb36-876"><a href="#cb36-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-877"><a href="#cb36-877" aria-hidden="true" tabindex="-1"></a><span class="in">    //Add OSM tile layer</span></span>
<span id="cb36-878"><a href="#cb36-878" aria-hidden="true" tabindex="-1"></a><span class="in">    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {</span></span>
<span id="cb36-879"><a href="#cb36-879" aria-hidden="true" tabindex="-1"></a><span class="in">            maxZoom: 19,</span></span>
<span id="cb36-880"><a href="#cb36-880" aria-hidden="true" tabindex="-1"></a><span class="in">            attribution: '© OpenStreetMap'</span></span>
<span id="cb36-881"><a href="#cb36-881" aria-hidden="true" tabindex="-1"></a><span class="in">        }).addTo(map3);</span></span>
<span id="cb36-882"><a href="#cb36-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-883"><a href="#cb36-883" aria-hidden="true" tabindex="-1"></a><span class="in">    //Create new geojson that turns lat and lon columns into a vector of geometry</span></span>
<span id="cb36-884"><a href="#cb36-884" aria-hidden="true" tabindex="-1"></a><span class="in">    var geojsonData = {</span></span>
<span id="cb36-885"><a href="#cb36-885" aria-hidden="true" tabindex="-1"></a><span class="in">        "type": "FeatureCollection",</span></span>
<span id="cb36-886"><a href="#cb36-886" aria-hidden="true" tabindex="-1"></a><span class="in">        "features": []</span></span>
<span id="cb36-887"><a href="#cb36-887" aria-hidden="true" tabindex="-1"></a><span class="in">        };</span></span>
<span id="cb36-888"><a href="#cb36-888" aria-hidden="true" tabindex="-1"></a><span class="in">        //loop iterating through the whole dataset for each data point</span></span>
<span id="cb36-889"><a href="#cb36-889" aria-hidden="true" tabindex="-1"></a><span class="in">        closures.forEach(function (dataPoint) {</span></span>
<span id="cb36-890"><a href="#cb36-890" aria-hidden="true" tabindex="-1"></a><span class="in">            var feature = {</span></span>
<span id="cb36-891"><a href="#cb36-891" aria-hidden="true" tabindex="-1"></a><span class="in">                "type": "Feature",</span></span>
<span id="cb36-892"><a href="#cb36-892" aria-hidden="true" tabindex="-1"></a><span class="in">                "properties": {</span></span>
<span id="cb36-893"><a href="#cb36-893" aria-hidden="true" tabindex="-1"></a><span class="in">                    "IncidentID": dataPoint.IncidentID,</span></span>
<span id="cb36-894"><a href="#cb36-894" aria-hidden="true" tabindex="-1"></a><span class="in">                    "start": dataPoint.start,</span></span>
<span id="cb36-895"><a href="#cb36-895" aria-hidden="true" tabindex="-1"></a><span class="in">                    "end": dataPoint.end,</span></span>
<span id="cb36-896"><a href="#cb36-896" aria-hidden="true" tabindex="-1"></a><span class="in">                    "RoadName": dataPoint.RoadName,</span></span>
<span id="cb36-897"><a href="#cb36-897" aria-hidden="true" tabindex="-1"></a><span class="in">                    "CommonName": dataPoint.CommonName,</span></span>
<span id="cb36-898"><a href="#cb36-898" aria-hidden="true" tabindex="-1"></a><span class="in">                    "Direction": dataPoint.Direction,</span></span>
<span id="cb36-899"><a href="#cb36-899" aria-hidden="true" tabindex="-1"></a><span class="in">                    "ConditionName": dataPoint.ConditionName,</span></span>
<span id="cb36-900"><a href="#cb36-900" aria-hidden="true" tabindex="-1"></a><span class="in">                    "IncidentType": dataPoint.IncidentType,</span></span>
<span id="cb36-901"><a href="#cb36-901" aria-hidden="true" tabindex="-1"></a><span class="in">                    "Event": dataPoint.Event,</span></span>
<span id="cb36-902"><a href="#cb36-902" aria-hidden="true" tabindex="-1"></a><span class="in">                    "EventName": dataPoint.EventName,</span></span>
<span id="cb36-903"><a href="#cb36-903" aria-hidden="true" tabindex="-1"></a><span class="in">                    "Reason": dataPoint.Reason,</span></span>
<span id="cb36-904"><a href="#cb36-904" aria-hidden="true" tabindex="-1"></a><span class="in">                    "DOTNotes": dataPoint.DOTNotes,</span></span>
<span id="cb36-905"><a href="#cb36-905" aria-hidden="true" tabindex="-1"></a><span class="in">                    "day": dataPoint.day,</span></span>
<span id="cb36-906"><a href="#cb36-906" aria-hidden="true" tabindex="-1"></a><span class="in">                    "flood": dataPoint.flood,</span></span>
<span id="cb36-907"><a href="#cb36-907" aria-hidden="true" tabindex="-1"></a><span class="in">                    "wind": dataPoint.wind,</span></span>
<span id="cb36-908"><a href="#cb36-908" aria-hidden="true" tabindex="-1"></a><span class="in">                    "winter": dataPoint.winter,</span></span>
<span id="cb36-909"><a href="#cb36-909" aria-hidden="true" tabindex="-1"></a><span class="in">                    "fog": dataPoint.fog,</span></span>
<span id="cb36-910"><a href="#cb36-910" aria-hidden="true" tabindex="-1"></a><span class="in">                    "rainevent": dataPoint.rainevent,</span></span>
<span id="cb36-911"><a href="#cb36-911" aria-hidden="true" tabindex="-1"></a><span class="in">                    "winterevent": dataPoint.winterevent,</span></span>
<span id="cb36-912"><a href="#cb36-912" aria-hidden="true" tabindex="-1"></a><span class="in">                    "cycloneevent": dataPoint.cycloneevent,</span></span>
<span id="cb36-913"><a href="#cb36-913" aria-hidden="true" tabindex="-1"></a><span class="in">                    "dur": dataPoint.dur,</span></span>
<span id="cb36-914"><a href="#cb36-914" aria-hidden="true" tabindex="-1"></a><span class="in">                    "noweather": dataPoint.noweather,</span></span>
<span id="cb36-915"><a href="#cb36-915" aria-hidden="true" tabindex="-1"></a><span class="in">                    "st": dataPoint.st,</span></span>
<span id="cb36-916"><a href="#cb36-916" aria-hidden="true" tabindex="-1"></a><span class="in">                    "fn": dataPoint.fn,</span></span>
<span id="cb36-917"><a href="#cb36-917" aria-hidden="true" tabindex="-1"></a><span class="in">                    "t": dataPoint.t,</span></span>
<span id="cb36-918"><a href="#cb36-918" aria-hidden="true" tabindex="-1"></a><span class="in">                    "te": dataPoint.te</span></span>
<span id="cb36-919"><a href="#cb36-919" aria-hidden="true" tabindex="-1"></a><span class="in">                },</span></span>
<span id="cb36-920"><a href="#cb36-920" aria-hidden="true" tabindex="-1"></a><span class="in">                "geometry": { //here is where the new lat/lon vector is located</span></span>
<span id="cb36-921"><a href="#cb36-921" aria-hidden="true" tabindex="-1"></a><span class="in">                    "type": "Point",</span></span>
<span id="cb36-922"><a href="#cb36-922" aria-hidden="true" tabindex="-1"></a><span class="in">                    "coordinates": [dataPoint.Longitude, dataPoint.Latitude]</span></span>
<span id="cb36-923"><a href="#cb36-923" aria-hidden="true" tabindex="-1"></a><span class="in">                }</span></span>
<span id="cb36-924"><a href="#cb36-924" aria-hidden="true" tabindex="-1"></a><span class="in">            };</span></span>
<span id="cb36-925"><a href="#cb36-925" aria-hidden="true" tabindex="-1"></a><span class="in">            geojsonData.features.push(feature); //adds entire feature to the geojsonData object</span></span>
<span id="cb36-926"><a href="#cb36-926" aria-hidden="true" tabindex="-1"></a><span class="in">        });</span></span>
<span id="cb36-927"><a href="#cb36-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-928"><a href="#cb36-928" aria-hidden="true" tabindex="-1"></a><span class="in">   // Create unique icon (x for road closures)</span></span>
<span id="cb36-929"><a href="#cb36-929" aria-hidden="true" tabindex="-1"></a><span class="in">var customIcon = L.divIcon({</span></span>
<span id="cb36-930"><a href="#cb36-930" aria-hidden="true" tabindex="-1"></a><span class="in">    className: 'material-symbols-outlined',</span></span>
<span id="cb36-931"><a href="#cb36-931" aria-hidden="true" tabindex="-1"></a><span class="in">    iconAnchor: [5, 5],</span></span>
<span id="cb36-932"><a href="#cb36-932" aria-hidden="true" tabindex="-1"></a><span class="in">    html: '&amp;#x2716;'</span></span>
<span id="cb36-933"><a href="#cb36-933" aria-hidden="true" tabindex="-1"></a><span class="in">});</span></span>
<span id="cb36-934"><a href="#cb36-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-935"><a href="#cb36-935" aria-hidden="true" tabindex="-1"></a><span class="in">// Create geojson layer from closure data</span></span>
<span id="cb36-936"><a href="#cb36-936" aria-hidden="true" tabindex="-1"></a><span class="in">var geojsonLayer3 = L.geoJson(geojsonData, {</span></span>
<span id="cb36-937"><a href="#cb36-937" aria-hidden="true" tabindex="-1"></a><span class="in">    pointToLayer: function (feature, latlng) {</span></span>
<span id="cb36-938"><a href="#cb36-938" aria-hidden="true" tabindex="-1"></a><span class="in">        // Create marker with custom icon</span></span>
<span id="cb36-939"><a href="#cb36-939" aria-hidden="true" tabindex="-1"></a><span class="in">        var marker = L.marker(latlng, { icon: customIcon });</span></span>
<span id="cb36-940"><a href="#cb36-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-941"><a href="#cb36-941" aria-hidden="true" tabindex="-1"></a><span class="in">        // Bind a popup to the marker</span></span>
<span id="cb36-942"><a href="#cb36-942" aria-hidden="true" tabindex="-1"></a><span class="in">        marker.bindPopup("&lt;b&gt;Road Name:&lt;/b&gt; " + feature.properties.RoadName + "&lt;br&gt;" +</span></span>
<span id="cb36-943"><a href="#cb36-943" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Direction:&lt;/b&gt; " + feature.properties.Direction + "&lt;br&gt;" +</span></span>
<span id="cb36-944"><a href="#cb36-944" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Start Time:&lt;/b&gt; " + new Date(feature.properties.st).toDateString() + "&lt;br&gt;" +</span></span>
<span id="cb36-945"><a href="#cb36-945" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;End Time:&lt;/b&gt; " + new Date(feature.properties.fn).toDateString() + "&lt;br&gt;" +</span></span>
<span id="cb36-946"><a href="#cb36-946" aria-hidden="true" tabindex="-1"></a><span class="in">                   "&lt;b&gt;Reason:&lt;/b&gt; " + feature.properties.Reason);</span></span>
<span id="cb36-947"><a href="#cb36-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-948"><a href="#cb36-948" aria-hidden="true" tabindex="-1"></a><span class="in">        return marker;</span></span>
<span id="cb36-949"><a href="#cb36-949" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb36-950"><a href="#cb36-950" aria-hidden="true" tabindex="-1"></a><span class="in">}).addTo(map3);</span></span>
<span id="cb36-951"><a href="#cb36-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-952"><a href="#cb36-952" aria-hidden="true" tabindex="-1"></a><span class="in">//Create heatmap layer</span></span>
<span id="cb36-953"><a href="#cb36-953" aria-hidden="true" tabindex="-1"></a><span class="in">var heatLayer = L.heatLayer(geojsonData.features.map(function (feature) {</span></span>
<span id="cb36-954"><a href="#cb36-954" aria-hidden="true" tabindex="-1"></a><span class="in">            return [feature.geometry.coordinates[1], feature.geometry.coordinates[0]];</span></span>
<span id="cb36-955"><a href="#cb36-955" aria-hidden="true" tabindex="-1"></a><span class="in">        }), {</span></span>
<span id="cb36-956"><a href="#cb36-956" aria-hidden="true" tabindex="-1"></a><span class="in">            radius: 25,</span></span>
<span id="cb36-957"><a href="#cb36-957" aria-hidden="true" tabindex="-1"></a><span class="in">            blur: 15,</span></span>
<span id="cb36-958"><a href="#cb36-958" aria-hidden="true" tabindex="-1"></a><span class="in">            maxZoom: 10,</span></span>
<span id="cb36-959"><a href="#cb36-959" aria-hidden="true" tabindex="-1"></a><span class="in">            max: 1.8,</span></span>
<span id="cb36-960"><a href="#cb36-960" aria-hidden="true" tabindex="-1"></a><span class="in">            gradient: {</span></span>
<span id="cb36-961"><a href="#cb36-961" aria-hidden="true" tabindex="-1"></a><span class="in">                0.1: 'blue',</span></span>
<span id="cb36-962"><a href="#cb36-962" aria-hidden="true" tabindex="-1"></a><span class="in">                0.2: 'cyan',</span></span>
<span id="cb36-963"><a href="#cb36-963" aria-hidden="true" tabindex="-1"></a><span class="in">                0.4: 'lime',</span></span>
<span id="cb36-964"><a href="#cb36-964" aria-hidden="true" tabindex="-1"></a><span class="in">                0.6: 'yellow',</span></span>
<span id="cb36-965"><a href="#cb36-965" aria-hidden="true" tabindex="-1"></a><span class="in">                0.9: 'orange',</span></span>
<span id="cb36-966"><a href="#cb36-966" aria-hidden="true" tabindex="-1"></a><span class="in">                1.0: 'red'</span></span>
<span id="cb36-967"><a href="#cb36-967" aria-hidden="true" tabindex="-1"></a><span class="in">            }</span></span>
<span id="cb36-968"><a href="#cb36-968" aria-hidden="true" tabindex="-1"></a><span class="in">        }).addTo(map3);</span></span>
<span id="cb36-969"><a href="#cb36-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-970"><a href="#cb36-970" aria-hidden="true" tabindex="-1"></a><span class="in">// Create slider function</span></span>
<span id="cb36-971"><a href="#cb36-971" aria-hidden="true" tabindex="-1"></a><span class="in">function moveSlider(value) {</span></span>
<span id="cb36-972"><a href="#cb36-972" aria-hidden="true" tabindex="-1"></a><span class="in">    // Define start and end dates</span></span>
<span id="cb36-973"><a href="#cb36-973" aria-hidden="true" tabindex="-1"></a><span class="in">    var startDate = new Date("2018-09-12T00:00:00Z");</span></span>
<span id="cb36-974"><a href="#cb36-974" aria-hidden="true" tabindex="-1"></a><span class="in">    var endDate = new Date("2018-09-29T23:59:59Z");</span></span>
<span id="cb36-975"><a href="#cb36-975" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-976"><a href="#cb36-976" aria-hidden="true" tabindex="-1"></a><span class="in">    // Calculate total duration in milliseconds</span></span>
<span id="cb36-977"><a href="#cb36-977" aria-hidden="true" tabindex="-1"></a><span class="in">    var totalDuration = endDate.getTime() - startDate.getTime();</span></span>
<span id="cb36-978"><a href="#cb36-978" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-979"><a href="#cb36-979" aria-hidden="true" tabindex="-1"></a><span class="in">    // Calculate the selected time based on the slider value, make it a proportion of 17</span></span>
<span id="cb36-980"><a href="#cb36-980" aria-hidden="true" tabindex="-1"></a><span class="in">    var selectedTime = new Date(startDate.getTime() + (totalDuration * value / 17));</span></span>
<span id="cb36-981"><a href="#cb36-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-982"><a href="#cb36-982" aria-hidden="true" tabindex="-1"></a><span class="in">    // Filter geojsonData based on selected time</span></span>
<span id="cb36-983"><a href="#cb36-983" aria-hidden="true" tabindex="-1"></a><span class="in">    var filteredData = geojsonData.features.filter(function (feature) {</span></span>
<span id="cb36-984"><a href="#cb36-984" aria-hidden="true" tabindex="-1"></a><span class="in">        var startTime = new Date(feature.properties.st).getTime();</span></span>
<span id="cb36-985"><a href="#cb36-985" aria-hidden="true" tabindex="-1"></a><span class="in">        var endTime = new Date(feature.properties.fn).getTime();</span></span>
<span id="cb36-986"><a href="#cb36-986" aria-hidden="true" tabindex="-1"></a><span class="in">        return selectedTime &gt;= startTime &amp;&amp; selectedTime &lt;= endTime;</span></span>
<span id="cb36-987"><a href="#cb36-987" aria-hidden="true" tabindex="-1"></a><span class="in">    });</span></span>
<span id="cb36-988"><a href="#cb36-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-989"><a href="#cb36-989" aria-hidden="true" tabindex="-1"></a><span class="in">    // Clear existing markers from geojsonLayer</span></span>
<span id="cb36-990"><a href="#cb36-990" aria-hidden="true" tabindex="-1"></a><span class="in">    geojsonLayer3.clearLayers();</span></span>
<span id="cb36-991"><a href="#cb36-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-992"><a href="#cb36-992" aria-hidden="true" tabindex="-1"></a><span class="in">    // Add markers for filtered data to geojsonLayer</span></span>
<span id="cb36-993"><a href="#cb36-993" aria-hidden="true" tabindex="-1"></a><span class="in">    filteredData.forEach(function (feature) {</span></span>
<span id="cb36-994"><a href="#cb36-994" aria-hidden="true" tabindex="-1"></a><span class="in">        var marker = L.marker([feature.geometry.coordinates[1], feature.geometry.coordinates[0]], { icon: customIcon });</span></span>
<span id="cb36-995"><a href="#cb36-995" aria-hidden="true" tabindex="-1"></a><span class="in">        geojsonLayer3.addLayer(marker);</span></span>
<span id="cb36-996"><a href="#cb36-996" aria-hidden="true" tabindex="-1"></a><span class="in">    });</span></span>
<span id="cb36-997"><a href="#cb36-997" aria-hidden="true" tabindex="-1"></a><span class="in"> //map2 things   </span></span>
<span id="cb36-998"><a href="#cb36-998" aria-hidden="true" tabindex="-1"></a><span class="in">    // Clear existing markers from geojsonLayer</span></span>
<span id="cb36-999"><a href="#cb36-999" aria-hidden="true" tabindex="-1"></a><span class="in">    geojsonLayer.clearLayers();</span></span>
<span id="cb36-1000"><a href="#cb36-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-1001"><a href="#cb36-1001" aria-hidden="true" tabindex="-1"></a><span class="in">    // Add markers for filtered data to geojsonLayer</span></span>
<span id="cb36-1002"><a href="#cb36-1002" aria-hidden="true" tabindex="-1"></a><span class="in">    filteredData.forEach(function (feature) {</span></span>
<span id="cb36-1003"><a href="#cb36-1003" aria-hidden="true" tabindex="-1"></a><span class="in">        var marker = L.marker([feature.geometry.coordinates[1], feature.geometry.coordinates[0]], { icon: customIcon });</span></span>
<span id="cb36-1004"><a href="#cb36-1004" aria-hidden="true" tabindex="-1"></a><span class="in">        geojsonLayer.addLayer(marker);</span></span>
<span id="cb36-1005"><a href="#cb36-1005" aria-hidden="true" tabindex="-1"></a><span class="in">    });</span></span>
<span id="cb36-1006"><a href="#cb36-1006" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-1007"><a href="#cb36-1007" aria-hidden="true" tabindex="-1"></a><span class="in">    //Create variable to store filtered data points for heatlayer </span></span>
<span id="cb36-1008"><a href="#cb36-1008" aria-hidden="true" tabindex="-1"></a><span class="in">    var heatData = filteredData.map(function (feature) {</span></span>
<span id="cb36-1009"><a href="#cb36-1009" aria-hidden="true" tabindex="-1"></a><span class="in">                return [feature.geometry.coordinates[1], feature.geometry.coordinates[0]];</span></span>
<span id="cb36-1010"><a href="#cb36-1010" aria-hidden="true" tabindex="-1"></a><span class="in">            });</span></span>
<span id="cb36-1011"><a href="#cb36-1011" aria-hidden="true" tabindex="-1"></a><span class="in">            //direct heatlayer to pull from heatData</span></span>
<span id="cb36-1012"><a href="#cb36-1012" aria-hidden="true" tabindex="-1"></a><span class="in">            heatLayer.setLatLngs(heatData);</span></span>
<span id="cb36-1013"><a href="#cb36-1013" aria-hidden="true" tabindex="-1"></a><span class="in">    //Use value from selectedTime to update the date at the top of page as slider moves</span></span>
<span id="cb36-1014"><a href="#cb36-1014" aria-hidden="true" tabindex="-1"></a><span class="in">    updateDateDisplay(selectedTime);</span></span>
<span id="cb36-1015"><a href="#cb36-1015" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb36-1016"><a href="#cb36-1016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-1017"><a href="#cb36-1017" aria-hidden="true" tabindex="-1"></a><span class="in">function updateDateDisplay(date) {</span></span>
<span id="cb36-1018"><a href="#cb36-1018" aria-hidden="true" tabindex="-1"></a><span class="in">        //create var that updates date display element at top of page</span></span>
<span id="cb36-1019"><a href="#cb36-1019" aria-hidden="true" tabindex="-1"></a><span class="in">        var dateDisplay = document.getElementById('dateDisplay');</span></span>
<span id="cb36-1020"><a href="#cb36-1020" aria-hidden="true" tabindex="-1"></a><span class="in">        //Transform date into readable text</span></span>
<span id="cb36-1021"><a href="#cb36-1021" aria-hidden="true" tabindex="-1"></a><span class="in">        dateDisplay.textContent = date.toDateString();</span></span>
<span id="cb36-1022"><a href="#cb36-1022" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb36-1023"><a href="#cb36-1023" aria-hidden="true" tabindex="-1"></a><span class="in">    //Add layer control to toggle back and forth between layers</span></span>
<span id="cb36-1024"><a href="#cb36-1024" aria-hidden="true" tabindex="-1"></a><span class="in">        var baseLayers = {</span></span>
<span id="cb36-1025"><a href="#cb36-1025" aria-hidden="true" tabindex="-1"></a><span class="in">            "Heatmap": heatLayer,</span></span>
<span id="cb36-1026"><a href="#cb36-1026" aria-hidden="true" tabindex="-1"></a><span class="in">            "Points": geojsonLayer3</span></span>
<span id="cb36-1027"><a href="#cb36-1027" aria-hidden="true" tabindex="-1"></a><span class="in">        };</span></span>
<span id="cb36-1028"><a href="#cb36-1028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-1029"><a href="#cb36-1029" aria-hidden="true" tabindex="-1"></a><span class="in">        L.control.layers(null, baseLayers).addTo(map3);</span></span>
<span id="cb36-1030"><a href="#cb36-1030" aria-hidden="true" tabindex="-1"></a><span class="in">        </span></span>
<span id="cb36-1031"><a href="#cb36-1031" aria-hidden="true" tabindex="-1"></a><span class="in">        map3.addLayer(heatLayer);</span></span>
<span id="cb36-1032"><a href="#cb36-1032" aria-hidden="true" tabindex="-1"></a><span class="in">        map3.addLayer(geojsonLayer3);</span></span>
<span id="cb36-1033"><a href="#cb36-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-1034"><a href="#cb36-1034" aria-hidden="true" tabindex="-1"></a><span class="in">        //create search location icon</span></span>
<span id="cb36-1035"><a href="#cb36-1035" aria-hidden="true" tabindex="-1"></a><span class="in">        var geocoder = L.Control.geocoder({</span></span>
<span id="cb36-1036"><a href="#cb36-1036" aria-hidden="true" tabindex="-1"></a><span class="in">            geocoder: L.Control.Geocoder.nominatim(),</span></span>
<span id="cb36-1037"><a href="#cb36-1037" aria-hidden="true" tabindex="-1"></a><span class="in">            defaultMarkGeocode: false,</span></span>
<span id="cb36-1038"><a href="#cb36-1038" aria-hidden="true" tabindex="-1"></a><span class="in">            placeholder: "Search Location",</span></span>
<span id="cb36-1039"><a href="#cb36-1039" aria-hidden="true" tabindex="-1"></a><span class="in">            collapsed: true,</span></span>
<span id="cb36-1040"><a href="#cb36-1040" aria-hidden="true" tabindex="-1"></a><span class="in">            query: ""</span></span>
<span id="cb36-1041"><a href="#cb36-1041" aria-hidden="true" tabindex="-1"></a><span class="in">        }).on('markgeocode', function (e) {</span></span>
<span id="cb36-1042"><a href="#cb36-1042" aria-hidden="true" tabindex="-1"></a><span class="in">            var latlng = e.geocode.center;</span></span>
<span id="cb36-1043"><a href="#cb36-1043" aria-hidden="true" tabindex="-1"></a><span class="in">            map.setView(latlng, map3.getZoom());</span></span>
<span id="cb36-1044"><a href="#cb36-1044" aria-hidden="true" tabindex="-1"></a><span class="in">            map.fitBounds(e.geocode.bbox);</span></span>
<span id="cb36-1045"><a href="#cb36-1045" aria-hidden="true" tabindex="-1"></a><span class="in">        }).addTo(map3);</span></span>
<span id="cb36-1046"><a href="#cb36-1046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-1047"><a href="#cb36-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-1048"><a href="#cb36-1048" aria-hidden="true" tabindex="-1"></a><span class="in">//Start with empty map</span></span>
<span id="cb36-1049"><a href="#cb36-1049" aria-hidden="true" tabindex="-1"></a><span class="in">moveSlider(0)</span></span>
<span id="cb36-1050"><a href="#cb36-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-1051"><a href="#cb36-1051" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/script&gt;</span></span>
<span id="cb36-1052"><a href="#cb36-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-1053"><a href="#cb36-1053" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb36-1054"><a href="#cb36-1054" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/body&gt;</span></span>
<span id="cb36-1055"><a href="#cb36-1055" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/html&gt;</span></span>
<span id="cb36-1056"><a href="#cb36-1056" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>